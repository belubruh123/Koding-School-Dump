<html><head><meta content="text/html; charset=UTF-8" http-equiv="Content-Type"><title>兒童/青少年/初學者程式設計線上課程</title><meta name="csrf-param" content="authenticity_token">
  <meta name="csrf-token" content="MuGXra0N8oAIdXnL4+pUjMTpwh2lQ1gfbP4bqnbxP+IjnE6HujX+lobdfJULHwpFfKlHmNPQvHL7KFwqq+u4CQ=="></head><body style="margin:0px"><div id="container" style="width:100vw; height: 100vh; display:flex; align-items:center; justify-content:center;"><div id="stagebox" style="position: relative;"><canvas height="480" id="stage" style="background-color: rgb(0, 105, 128); display: block; outline: none; width: 1237.33px;" width="640" tabindex="1"></canvas><div id="gamepad_arrow" style="transform: rotate(45deg); position: absolute; bottom: 0; right: 70px;"><img class="gamepad-btn" id="key_down" style="transform: rotate(135deg); bottom: 0; right: 0;" src="https://cdn0.koding.school/assets/gamepad/arrow-c2dcda3fd8057f62fff9241e03e7f3b06666451049999d4ed2b3632b91f92646.svg" alt="Arrow"><img class="gamepad-btn" id="key_right" style="transform: rotate(45deg); bottom: 55px; right: 0;" src="https://cdn0.koding.school/assets/gamepad/arrow-c2dcda3fd8057f62fff9241e03e7f3b06666451049999d4ed2b3632b91f92646.svg" alt="Arrow"><img class="gamepad-btn" id="key_left" style="transform: rotate(-135deg); bottom: 0; right: 55px;" src="https://cdn0.koding.school/assets/gamepad/arrow-c2dcda3fd8057f62fff9241e03e7f3b06666451049999d4ed2b3632b91f92646.svg" alt="Arrow"><img class="gamepad-btn" id="key_up" style="transform: rotate(-45deg); bottom: 55px; right: 55px;" src="https://cdn0.koding.school/assets/gamepad/arrow-c2dcda3fd8057f62fff9241e03e7f3b06666451049999d4ed2b3632b91f92646.svg" alt="Arrow"></div><div id="gamepad_wasd" style="transform: rotate(45deg); position: absolute; bottom: 0; right: calc(100% - 70px);"><img class="gamepad-btn" id="key_s" style="transform: rotate(-45deg); bottom: 0; right: 0;" src="https://cdn2.koding.school/assets/gamepad/key_s-e0d41d68d299e1fafb641796b923f237f30ad696a5ee12ef64a61a3723445b3c.svg" alt="Key s"><img class="gamepad-btn" id="key_d" style="transform: rotate(-45deg); bottom: 55px; right: 0;" src="https://cdn4.koding.school/assets/gamepad/key_d-dfc8fe5801e48f9ac08719e2a5fe980d8cbeece164092254a346a81fb667feb3.svg" alt="Key d"><img class="gamepad-btn" id="key_a" style="transform: rotate(-45deg); bottom: 0; right: 55px;" src="https://cdn4.koding.school/assets/gamepad/key_a-1602901ced445e05ed887d6da6970e091bf086a18d7d8fffbd6786a59fa40eda.svg" alt="Key a"><img class="gamepad-btn" id="key_w" style="transform: rotate(-45deg); bottom: 55px; right: 55px;" src="https://cdn8.koding.school/assets/gamepad/key_w-467c96ce07af2e3f0c3f99d1da8dedc832758b8083f7ca2eb185b76129b5f6c8.svg" alt="Key w"></div><img class="gamepad-btn" id="toggle_gamepad" style="top: 5px; right: 5px; width: 30px; height: 30px;" src="https://cdn2.koding.school/assets/gamepad/gamepad-f162bdefa53838fed4d91e02bf7276c0f9cac356b4e631759c62a555cafa8055.svg" alt="Gamepad"><img class="gamepad-btn" id="toggle_sound" style="top: 40px; right: 5px; width: 30px; height: 30px;" src="https://cdn4.koding.school/assets/gamepad/note-06f5103c2355b5ccde538cb0f94907296fefb867e11e3b5c395897389e9f355b.svg" alt="Note"></div></div>
<script>function guidGenerator(){var t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}function Sandbox(){}function Console(){var t=this,e=window.console.log;console.log=function(...n){for(var r in e(...n),n){var o=t.textColor(n[r]);t.postConsoleText(o.text,o.type)}};var n=window.console.error;console.error=function(...e){n(...e),t.postConsoleText(e[0],"error")},window.onerror=function(e,n,r,o){var i="Line: "+r+":"+o+" "+e;t.postConsoleText(i,"error")}}window.CORS_DOMAINS=["localhost:3033","localhost:3030","https://koding.school","https://sbcn.koding.school","https://sb.koding.school","https://d.koding.school","https://sb.d.koding.school","https://cn.koding.school","http://edge.koding.school","http://sb.edge.koding.school","http://koding.school.test","http://sb.koding.school.test","http://cn.koding.school.test"],function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+s+"'")}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return o(n||e)},u,u.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e,n){var r=(n=e.exports=function(t){if(t&&"object"==typeof t){var e=t.which||t.keyCode||t.charCode;e&&(t=e)}if("number"==typeof t)return s[t];var n,i=String(t);return(n=r[i.toLowerCase()])?n:(n=o[i.toLowerCase()])||(1===i.length?i.charCodeAt(0):undefined)}).code=n.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},o=n.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,"break":19,caps:20,"return":13,escape:27,spc:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(i=97;i<123;i++)r[String.fromCharCode(i)]=i-32;for(var i=48;i<58;i++)r[i-48]=i;for(i=1;i<13;i++)r["f"+i]=i+111;for(i=0;i<10;i++)r["numpad "+i]=i+96;var s=n.names=n.title={};for(i in r)s[r[i]]=i;for(var a in o)r[a]=o[a]},{}],2:[function(t,e){function n(t){function e(){n&&t(),requestAnimationFrame(e)}var n=!1;e(),this.start=function(){n=!0},this.stop=function(){n=!1}}e.exports=n},{}],3:[function(t,e){function n(t){this.pool=[],this.io=t}const r=["click","mousedown","mouseup","keydown","keyup","holding","touch","hover"];n.prototype={traverse:function(){var t=this.io,e=this;this.pool.forEach(function(n){"touch"===n.event?e.touchJudger(n.sprite,n.handler,n.targets):"click"===n.event?e.mouseJudger(n.sprite,n.handler,t.clicked):"hover"===n.event?e.hoverJudger(n.sprite,n.handler,t.cursor):"mousedown"===n.event?e.mouseJudger(n.sprite,n.handler,t.mousedown):"mouseup"===n.event?e.mouseJudger(n.sprite,n.handler,t.mouseup):"holding"===n.event?e.keyJudger(n.key,n.handler,t.holding):"keyup"===n.event?e.keyJudger(n.key,n.handler,t.keyup):"keydown"===n.event&&e.keyJudger(n.key,n.handler,t.keydown)}),this.pool=this.pool.filter(function(t){return!(t.sprite&&t.sprite._deleted)}),t.clearEvents()},register:function(){if(this.validEventName(arguments[0])){var t=arguments[0],e={event:t,handler:arguments[arguments.length-1]};"touch"===t?(e.sprite=arguments[1],e.targets=arguments[2]instanceof Array?arguments[2]:[arguments[2]]):"hover"===t?e.sprite=arguments[1]instanceof Array?arguments[1]:[arguments[1]]:["keydown","keyup","holding"].includes(t)?e.key=arguments[1]instanceof Function?"any":arguments[1]:["mousedown","mouseup","click"].includes(t)?arguments[1]instanceof Function?e.sprite=null:e.sprite=arguments[1]instanceof Array?arguments[1]:[arguments[1]]:"listen"===t&&(e.message=arguments[1],e.sprite=arguments[2]),this.pool.push(e)}},emit:function(t){for(var e=0;e<this.pool.length;e++){var n=this.pool[e];"listen"==n.event&&n.message==t&&n.handler.call(n.sprite)}},mouseJudger:function(t,e,n){n.x&&n.y&&(t?t.forEach(function(t){t.touched(n.x,n.y)&&e.call(t)}):e())},keyJudger:function(t,e,n){n[t]&&e()},touchJudger:function(t,e,n){n.forEach(function(n){t.touched(n)&&e.call(t,n)})},hoverJudger:function(t,e,n){t.forEach(function(t){t.touched(n.x,n.y)&&e.call(t)})},validEventName:function(t){return!1===r.includes(t)&&console.error("`"+t+"` \u4e8b\u4ef6\u662f\u4e0d\u652f\u63f4\u7684\uff0c\u8acb\u6aa2\u67e5\u662f\u5426\u7b26\u5408\u4ee5\u4e0b\u652f\u63f4\u7684\u4e8b\u4ef6\n "+this.VALID_EVENT_NAMES.join(", ")),!0},VALID_EVENT_NAMES:r},e.exports=n},{}],4:[function(t){function e(t,e){function f(){T.traverse();for(var t=0;t<A.length;t++)A[t]();B.removeDeletedSprites(),B.runOnTick(),C.updateFPS(),x.autoRendering&&(E.drawBackdrop(k.path,k.x,k.y,k.w,k.h),R.drawShapes(),E.drawSprites(B),R.drawTexts())}function d(t){t.width&&(b.width=t.width),t.height&&(b.height=t.height),t.precision&&(x.precision=t.precision),(t.precision||t.width||t.height)&&(w.width=b.width/x.precision,w.height=b.height/x.precision),t.autoRendering!=undefined&&(x.autoRendering=!!t.autoRendering)}function y(t){return arguments.length>1&&(t=Array.from(arguments)),new n(t,T,E,S,D,B)}function g(t,e,n,r,o){k.path=t,k.x=e,k.y=n,k.w=r,k.h=o}function m(t){A.push(t)}function v(){j.stop(),N.stop()}var b=document.getElementById(t),w=document.createElement("canvas");w.width=b.width,w.height=b.height;var x={debugMode:e||!1,autoRendering:!0,precision:1},k={path:"#ffffff"},A=[],S=new u,B=new r,C=new i,_=new h(b,x),T=new o(_),E=new a(b,S),N=new c(S),R=new l(b,x),D=new p(w,S,x),j=new s(f),P={set:d,preload:S.preload.bind(S),start:j.start.bind(j),stop:v,createSprite:y,createSound:N.play.bind(N),setBackground:g,setBackdrop:g,inspector:C,forever:m,update:m,always:m,sound:N,cursor:_.cursor,key:_.holding,when:T.register.bind(T),on:T.register.bind(T),broadcast:T.emit.bind(T),pen:R,print:R.drawText.bind(R),drawText:R.drawText.bind(R),drawBackdrop:E.drawBackdrop.bind(E),drawBackground:E.drawBackdrop.bind(E),drawSprites:E.drawSprites.bind(E),clear:E.clear.bind(E),Sprite:n,gameloop:f};return x.debugMode&&(P.eventList=T),P}var n=t("./sprite"),r=t("./sprites"),o=t("./event-list"),i=t("./inspector"),s=t("./clock"),a=t("./renderer"),c=t("./sound"),u=t("./loader"),h=t("./io"),l=t("./pen"),p=t("./touch-system");window.Engine=e},{"./clock":2,"./event-list":3,"./inspector":5,"./io":6,"./loader":7,"./pen":8,"./renderer":9,"./sound":11,"./sprite":12,"./sprites":13,"./touch-system":14}],5:[function(t,e){function n(){this.fps=0,this._lastFrameUpdatedTime=(new Date).getTime()}n.prototype.updateFPS=function(){var t=(new Date).getTime();this.fps=Math.round(1e3/(t-this._lastFrameUpdatedTime)),this._lastFrameUpdatedTime=t},e.exports=n},{}],6:[function(t,e){function n(t,e){function n(e){return{x:(e.pageX-t.offsetLeft)/l,y:(e.pageY-t.offsetTop)/p}}var o=this.cursor={x:0,y:0,isDown:!1,left:!1,right:!1},i=this.clicked={x:null,y:null},s=this.mousedown={x:null,y:null},a=this.mouseup={x:null,y:null},c=this.keyup={any:!1},u=this.keydown={any:!1},h=this.holding={any:!1,count:0},l=1,p=1;for(var f in setInterval(function(){var e=t.getBoundingClientRect();l=e.width/t.width,p=e.height/t.height},100),r.codes)h[f]=!1;var d=!!e.debugMode;t.setAttribute("tabindex","1"),t.style.outline="none",t.oncontextmenu=function(){return!1},t.addEventListener("mousedown",function(t){1==t.which&&(o.left=!0),3==t.which&&(o.right=!0),o.isDown=!0,s.x=t.offsetX/l,s.y=t.offsetY/p}),t.addEventListener("mouseup",function(t){1==t.which&&(o.left=!1),3==t.which&&(o.right=!1),o.isDown=o.left||o.right,a.x=t.offsetX/l,a.y=t.offsetY/p}),t.addEventListener("mousemove",function(t){o.x=t.offsetX/l,o.y=t.offsetY/p}),t.addEventListener("touchstart",function(t){o.isDown=!0;var e=n(t.changedTouches[0]);o.x=s.x=e.x,o.y=s.y=e.y}),t.addEventListener("touchend",function(t){o.isDown=!1;var e=n(t.changedTouches[0]);o.x=a.x=e.x,o.y=a.y=e.y}),t.addEventListener("touchmove",function(t){var e=n(t.changedTouches[0]);o.x=e.x,o.y=e.y}),t.addEventListener("click",function(t){i.x=t.offsetX/l,i.y=t.offsetY/p,d&&console.log("Clicked! cursor:"+JSON.stringify(o))}),t.addEventListener("keydown",function(t){var e=r(t.keyCode);h[e]||(h.any=(h.count+=1)>0),u.any=!0,u[e]=!0,h[e]=!0,d&&console.log("Keydown! key:"+e)}),t.addEventListener("keyup",function(t){var e=r(t.keyCode);h.any=(h.count-=1)>0,c.any=!0,c[e]=!0,h[e]=!1,d&&console.log("Keyup! key:"+e)})}var r=t("keycode");n.prototype.clearEvents=function(){for(var t in this.clicked.x=null,this.clicked.y=null,this.mousedown.x=null,this.mousedown.y=null,this.mouseup.x=null,this.mouseup.y=null,this.keydown)this.keydown[t]=!1,this.keyup[t]=!1},e.exports=n},{keycode:1}],7:[function(t,e){function n(){this.context=new(window.AudioContext||window.webkitAudioContext),this.loaded=0,this.paths=[],this.sounds={},this.images={},this.completeFunc,this.progressFunc}const r="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEBLAEsAAD/2wBDAAQDAwQDAwQEBAQFBQQFBwsHBwYGBw4KCggLEA4RERAOEA8SFBoWEhMYEw8QFh8XGBsbHR0dERYgIh8cIhocHRz/2wBDAQUFBQcGBw0HBw0cEhASHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBz/wAARCAAyADIDAREAAhEBAxEB/8QAHAAAAgEFAQAAAAAAAAAAAAAABgcEAQIDBQgA/8QAORAAAQMCAwYCBQsFAAAAAAAAAQIDBAURACExBgcSIkFRFGETFjKBoRUjQmJykbGywdHSJERzk8P/xAAcAQABBQADAAAAAAAAAAAAAAAFAQIDBgcABAj/xAA/EQABAgQDAwUMCgMBAAAAAAABAgMABAURITFBBhJRFGGh0fAHFSJDUnGBkbGywfETMjM0NVNic5LSFyNyov/aAAwDAQACEQMRAD8AR1SqKx4mBT3Y/wAq8IlIakhQQpHFa2oINxmb9M++KU00iwcdB3L2uI9Qz86+lSpSRUjlASFhKgbEXI0I4ejUYwuHN6Ffp0tbLtNgsyGVcLiFNOJKSCMiOPLMDBxFGllAKCiQecdUZVMd0etMrUy8y2lScCClWH/uI43tVoJIEWnC4tcIcvbL6/cA+7DhRWPKPR1RErun1ZRuWm/Ur+8VTvarackMQEi97BDn6r9+E7yMeUr1jqh3+UKrq03/ABV/eKne5W7LSItOCVjhKQ2sC3Qe30wveVjyj0dUMHdOq2X0TfqV/eDyjVyZGgRpNcESOua8luPDYSoLJUQOa6jbUHuBne+WBD8q0pwplrndBJJyw9EaPTK1Oolm3q0Etl5SUoSkEKuo2F7qPG5GgzxNoJQ28QCGnbH6xwLi47yePRCj3kyZFP2qgS4ylx30RErbKDpzr0PUaj4YtFGbS5LKSoXBJ9gjEO6LMuytcYeYXurS2mxH/S+3PElxuDvFpwcZDMXaKOgBSCbJdAAGpOn5dNMMCnKc5Y4tno7dMdlbcntrKb7Vm51sYjRYHw4apyOFjC5kxnYry2XkKbdbVZSFCxBwbQtKkhSTcGMufl3Zd1TTySlSTYg5gxFw6IIY9FoLGy0RFer7ZS9YLhw1JspR6Eg9cvdqcBpqZXNr5LLZant2MabRKNLbPy4rdaHhD7NvW+hI8rX9OZ8KwjSxa1Mr+2NKlSli5mNBCMuBsekGQByx2lSyJaUWhHA+nCALNamaxtBKzMyfGIsBkkb4wHbGH6IyFAKSzynMZjT/AF4p1o9Gbx7fOEvvb4/WSMVkkmIlX3uLOnTX774tFF+7nz/ARhXdOAFWbAHix7y4CYsp6FIbfjuKbfbN0rGowVWhK0lCxcGKFKzTso6l9hRStJuCO3zhiOqh7x4HGktRtpI7dlJOQfSLdfv7kZDTAUfSU1yxxaPR26Y05aZTbWV32wG51sYjILA+HDVJzwxjFQ6BF2TgfL1fa+fSR4WIVDi4+hI6nr2HXth8xMrnF8nlctTEFJoUts6wKxXR4Y+o3rfiefoAxONgA/aHaCZtFPXKlLJJyQjiJS2nsL4JS0siXRuI+cUetVqZrEyZiZPmGiRwHxOsYtmr+sVHsLnxjNhbXnGFm/u7nmPsjmzn4xKfuI94R0M7KdDi/nWk5nl4SLeVsUiPUgA4iFHvYBTtBDSSOWGkAA+zZxzLFmon3dX/AEfYIwnun277NWHix7y4X+DEZzDMoNGi7I0/5erSlJkAWiw0qsu5Gp8/I6A99Ak1MKm18ll8tTGpUKkM7NsCuVe4X4tGSrka85GmSRiccIzPeD3kU1KmgmLXoaTZkXKVov01Nu56YjSF01yxxbVrwjsvrl9uJTeR/rm2hgm+ChfTm580nPA3hcS4z0KQ5HkNqbfaUULQoWKSOmDyVBYCkm4MZU+y4w4pl1JSpOBB0ibswAdpKMCbDxjNze1ucYhm/sHPMfZBLZ7Cryn7iPeEdEq9K6ouBtFlni9jv7sUXGPU+4kawnd7V/WGFxG58C3nw2y4l2+FsWqi/YK8/wABGDd078Wa/bHvriVRKHC2VgN12vJvIUAqLCtne2RP1vL6PXPRkzMrm18mljhqe3Yx2qLRJbZ+WFarafD8W3qToSPK1/RmcbAB9crsvaCa5Kluak8DYPK2OwGCctLIl0biPnFHrVamazNGZmT5hokcB2xiFElvQZDciOsofbN0LH0cSONpcSULFwYHy0y7Kupfl1FK0m4Ihiqbi7x6ap5pMeLtDDQniSk8IeSBa/4Z9CfPAQb9OXY4tno7dMaepuV22ld9Fm55sYjRY6ulORwtAdQ4rsXaulMvhTDqJrIWFAgo5xngpMqCpZZSbgpPsijUZh2XrUsy8khSXUAg533hHRDnh1OLPE1mSdR/LFJtHp8EgduqBis0eM3UGtpHYr8x1iOhpiK1H4uJwKXzAJvfPPMZWPlgjLTCy3yZCgkE3JJtwim1imS6J7vzMtqeU2kJShIKiVAqNyAOcWJwGedrKuvMbS7RVFyZKpNQKlEhDaYznCgDOwFumLBLrlGEbiFj1iMjrTG0FYmjMzUq5zDcVYDgMOnWNSvZqtINlUeopPYxlj9Mdjlcv+YPWIEDZ2rnKUc/grqjy9mK2i3FRqim+YvFWL/DHOWMfmD1iODZ2rnKUc/grqiRFo1fgPsyo1OqTTzZ4m3Ex1gg9xliNyZllpKFrSQecRPK0etyzqX5eWdSpOIIQrq+YhnQqd63uwKjLprlLq9PeZW8t5hTaHkpUL2JTbtroT1BwEW6JQLaQoKQoG1jleNVlpFW0K5eemmFMTLKklRKSAsAg4XzyNtU5YjGDD0zZzDyQD0uP54CbvNGl/S84i/+4P2F/irCCFRkPRFWfaT9lv8AKMKc4439SLkgGnJuL8364XSEV9aPM+yj/J/0H7Y5DeMVaWr+q5jyvEjPTlP7DCnKGpA3z24Rcz7bfkMvj+ww3SJTmY1d8JEl4//Z";n.prototype={preload:function(t,e,n){if(0===t.length)return e();this.paths=t,this.completeFunc=e,this.progressFunc=n;for(var r=0;r<t.length;r++){var o=t[r],i=o.split(".").pop();["jpg","jpeg","png","gif","svg"].includes(i)&&this._loadImage(o),["mp3","ogg","wav","midi"].includes(i)&&this._loadSound(o)}},getImgFromCache:function(t){var e=this.images[t];return e||((e=new Image).src=t,e.onerror=function(){console.error(this.src.split("/").pop()+" \u7d20\u6750\u8f09\u5165\u5931\u6557\uff0c\u8acb\u78ba\u8a8d\u662f\u5426\u586b\u5beb\u6b63\u78ba\uff01 \n \u5716\u7247\u8def\u5f91\uff1a"+this.src),e.src=r},this.images[t]=e),e},_loadImage:function(t){var e=this,n=new Image;n.src=t,n.crossOrigin="anonymous",n.onload=function(){e._loaded()},n.onerror=function(){console.error(this.src.split("/").pop()+" \u7d20\u6750\u8f09\u5165\u5931\u6557\uff0c\u8acb\u78ba\u8a8d\u662f\u5426\u586b\u5beb\u6b63\u78ba\uff01 \n \u5716\u7247\u8def\u5f91\uff1a"+this.src),img.src=r},this.images[t]=n},_loadSound:function(t){var e=this;this._xhrLoad(t,function(n){var r=n.response;e.context.decodeAudioData(r,function(n){e.sounds[t]=n,e._loaded()})})},_loaded:function(){this.loaded+=1,this.progressFunc&&this.progressFunc(this.loaded,this.paths.length),this.loaded>=this.paths.length&&this.completeFunc&&this.completeFunc()},_xhrLoad:function(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=function(){e(n)},n.onerror=function(){console.error(n)},n.send()}},e.exports=n},{}],8:[function(e,n){function r(t,e){this.ctx=t.getContext("2d"),this.size=1,this.color="black",this.fillColor=null,this.settings=e,this.shapes=[],this.texts=[]}r.prototype={drawShapes:function(){for(var t,e=this.ctx,n=0;n<this.shapes.length;n++)t=this.shapes[n],e.lineWidth=t.size,e.strokeStyle=t.color,e.fillStyle=t.fillColor,"line"==t.type?this._drawLine(t.x1,t.y1,t.x2,t.y2):"circle"==t.type?this._drawCircle(t.x,t.y,t.r):"triangle"==t.type?this._drawTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3):"rect"==t.type?this._drawRect(t.x,t.y,t.w,t.h):"polygon"==t.type&&this._drawPolygon.apply(this,t.points);this.shapes=[]},drawTexts:function(){for(var e=0;e<this.texts.length;e++)t=this.texts[e],this._drawText(t.text,t.x,t.y,t.color,t.size,t.font);this.texts=[]},drawText:function(t,e,n,r,o,i){if(e=e==undefined?10:e,n=n==undefined?10:n,r=r||"black",o=o||16,i=i||"Arial",!this.settings.autoRendering)return this._drawText(t,e,n,r,o,i);this._addText({text:t,x:e,y:n,color:r,size:o,font:i})},drawLine:function(t,e,n,r){if(!this.settings.autoRendering)return this._drawLine(t,e,n,r);var o={};o.x1=t,o.y1=e,o.x2=n,o.y2=r,o.type="line",this._addShape(o)},drawCircle:function(t,e,n){if(!this.settings.autoRendering)return this._drawCircle(t,e,n);var r={};r.x=t,r.y=e,r.r=n,r.type="circle",this._addShape(r)},drawTriangle:function(t,e,n,r,o,i){if(!this.settings.autoRendering)return this._drawTriangle(t,e,n,r,o,i);var s={};s.x1=t,s.y1=e,s.x2=n,s.y2=r,s.x3=o,s.y3=i,s.type="triangle",this._addShape(s)},drawRect:function(t,e,n,r){if(!this.settings.autoRendering)return this._drawRect(t,e,n,r);var o={};o.x=t,o.y=e,o.w=n,o.h=r,o.type="rect",this._addShape(o)},drawPolygon:function(){if(!this.settings.autoRendering)return this._drawPolygon.apply(this,arguments);var t={};t.points=Array.prototype.slice.call(arguments),t.type="polygon",this._addShape(t)},_drawText:function(t,e,n,r,o,i){this.settings.autoRendering||this._setPenAttr(),this.ctx.textBaseline="top",this.ctx.font=o+"px "+i,this.ctx.fillStyle=r,this.ctx.fillText(t,e,n)},_drawLine:function(t,e,n,r){this.settings.autoRendering||this._setPenAttr(),this.ctx.beginPath(),this.ctx.moveTo(t,e),this.ctx.lineTo(n,r),this.ctx.closePath(),this.size&&this.ctx.stroke(),this.fillColor&&this.ctx.fill()},_drawCircle:function(t,e,n){this.settings.autoRendering||this._setPenAttr(),this.ctx.beginPath(),this.ctx.arc(t,e,n,0,2*Math.PI),this.ctx.closePath(),this.size&&this.ctx.stroke(),this.fillColor&&this.ctx.fill()},_drawTriangle:function(t,e,n,r,o,i){this.settings.autoRendering||this._setPenAttr(),this.ctx.beginPath(),this.ctx.moveTo(t,e),this.ctx.lineTo(n,r),this.ctx.lineTo(o,i),this.ctx.closePath(),this.size&&this.ctx.stroke(),this.fillColor&&this.ctx.fill()},_drawRect:function(t,e,n,r){this.settings.autoRendering||this._setPenAttr(),this.ctx.beginPath(),this.ctx.moveTo(t,e),this.ctx.lineTo(t+n,e),this.ctx.lineTo(t+n,e+r),this.ctx.lineTo(t,e+r),this.ctx.closePath(),this.size&&this.ctx.stroke(),this.fillColor&&this.ctx.fill()},_drawPolygon:function(){this.settings.autoRendering||this._setPenAttr();var t=Array.prototype.slice.call(arguments);this.ctx.beginPath(),this.ctx.moveTo(t[0],t[1]);for(var e=2;e<t.length;e+=2)this.ctx.lineTo(t[e],t[e+1]);this.ctx.closePath(),this.size&&this.ctx.stroke(),this.fillColor&&this.ctx.fill()},_setPenAttr:function(){this.ctx.lineWidth=this.size,this.ctx.strokeStyle=this.color,this.ctx.fillStyle=this.fillColor},_addShape:function(t){t.size=this.size,t.color=this.color,t.fillColor=this.fillColor,this.shapes.push(t)},_addText:function(t){this.texts.push(t)}},n.exports=r},{}],9:[function(t,e){function n(t,e){this.canvas=t,this.ctx=t.getContext("2d"),this.loader=e}var r=t("./util");n.prototype={clear:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},drawSprites:function(t){t._sprites.sort(function(t,e){return t.layer-e.layer});var e=this;t.each(function(t){e.drawInstance(t)})},drawInstance:function(t){if(!t.hidden){var e=this.ctx,n=t.getCostumeImage(),o=r.degreeToRad(t.direction-90);if(e.globalAlpha=t.opacity,"flipped"===t.rotationStyle){if(t.direction>180)return e.translate(2*t.x,0),e.scale(-1,1),e.drawImage(n,t.x-t.width/2,t.y-t.height/2,t.width,t.height),e.scale(-1,1),e.translate(2*-t.x,0),void(e.globalAlpha=1);o=0}if("fixed"===t.rotationStyle)o=0;e.translate(t.x,t.y),e.rotate(o),e.drawImage(n,-t.width/2,-t.height/2,t.width,t.height),e.rotate(-o),e.translate(-t.x,-t.y),e.globalAlpha=1}},drawBackdrop:function(t,e,n,r,o){if(t.includes(".")){var i=this.loader.getImgFromCache(t);this.ctx.drawImage(i,e||0,n||0,r||i.width,o||i.height)}else t&&(this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height))}},e.exports=n},{"./util":15}],10:[function(t,e){function n(t){this.source=null,this.gainNode=t.createGain(),this.context=t,this.isLoop=!1,this.bufferData=null,this.volume=1,this.gainNode.connect(t.destination)}n.prototype={setVolume:function(t){if(t<0)return console.error("\u7121\u6548\u7684\u97f3\u91cf\u503c");this.volume=t,this.gainNode.gain.value=t},setBufferData:function(t){this.bufferData=t},setLoop:function(t){this.isLoop=t},mute:function(t){this.gainNode.gain.value=t?0:this.volume},pause:function(){this.source.playbackRate.value=Number.MIN_VALUE},resume:function(){this.source.playbackRate.value=1},play:function(){this.source=this.context.createBufferSource(),this.source.buffer=this.bufferData,this.source.loop=this.isLoop,this.source.connect(this.gainNode),this.source.start(0)},stop:function(){this.source.stop()}},e.exports=n},{}],11:[function(t,e){function n(t){this.context=new(window.AudioContext||window.webkitAudioContext),this.soundNodes=[],this.loader=t,this.sounds=t.sounds,this.muted=!1}var r=t("./sound-node");n.prototype={play:function(t,e){e=void 0!==e&&e;var n=new r(this.context);if(this.sounds[t]){var o=this.sounds[t];n.setBufferData(o),n.setLoop(e),this.soundNodes.push(n),n.play()}else{var i=this;this.loader._xhrLoad(t,function(r){var o=r.response;i.context.decodeAudioData(o,function(r){i.sounds[t]=r,n.setBufferData(r),n.setLoop(e),i.soundNodes.push(n),n.play()})})}return n},setVolume:function(t){if(t<0)return console.error("\u7121\u6548\u7684\u97f3\u91cf\u503c");for(var e=0;e<this.soundNodes.length;e++){this.soundNodes[e].setVolume(t)}},mute:function(t){for(var e=0;e<this.soundNodes.length;e++){this.soundNodes[e].mute(t)}},pause:function(){this.context.suspend()},resume:function(){this.context.resume()},stop:function(){for(var t=0;t<this.soundNodes.length;t++){this.soundNodes[t].stop()}}},e.exports=n},{"./sound-node":10}],12:[function(t,e){function n(t,e,n,o,i,s){t.constructor!==String&&t.constructor!==Array||(t={costumes:[].concat(t)}),this.x=r.isNumeric(t.x)?t.x:n.canvas.width/2,this.y=r.isNumeric(t.y)?t.y:n.canvas.height/2,this.direction=r.isNumeric(t.direction)?t.direction:90,this.scale=r.isNumeric(t.scale)?t.scale:1,this.layer=r.isNumeric(t.layer)?t.layer:0,this.opacity=r.isNumeric(t.opacity)?t.opacity:1,this.costumeId=r.isNumeric(t.costumeId)?t.costumeId:0,this.costumes=[].concat(t.costumes),this.hidden=!!t.hidden,this.rotationStyle=["full","flipped","fixed"].includes(t.rotationStyle)?t.rotationStyle:"full",this.width=1,this.height=1,this._onTickFuncs=[],this._deleted=!1,this._animation={frames:[],rate:5,timer:0},this._eventList=e,this._renderer=n,this._loader=o,this._touchSystem=i,s._sprites.push(this)}var r=t("./util");n.prototype={stepForward:function(t){var e=r.degreeToRad(this.direction);this.x+=Math.sin(e)*t,this.y-=Math.cos(e)*t},moveTo:function(){var t=r.position(arguments);this.x=t.x,this.y=t.y},move:function(t,e){this.x+=t,this.y+=e},toward:function(){var t=r.position(arguments);this.direction=r.vectorToDegree(t.x-this.x,t.y-this.y)},touched:function(){if(arguments[0].constructor===Array){for(var t=0;t<arguments[0].length;t++)if(this._isTouched(arguments[0][t]))return!0;return!1}return this._isTouched.apply(this,arguments)},distanceTo:function(){var t=r.position(arguments);return r.distanceBetween(this.x,this.y,t.x,t.y)},forever:function(t){this._onTickFuncs.push(t)},on:function(){var t=arguments[0],e=this._eventList;if(e.validEventName(t))return"touch"===t?e.register(t,this,arguments[1],arguments[2]):["mousedown","mouseup","click","hover"].includes(t)?e.register(t,this,arguments[1]):["keydown","keydup","holding"].includes(t)?e.register(t,arguments[1],arguments[2]):"listen"===t?e.register(t,arguments[1],this,arguments[2]):void 0},destroy:function(){this._deleted=!0},nextCostume:function(){this.costumeId+=1,this.costumeId>=this.costumes.length&&(this.costumeId=0)},bounceEdge:function(){var t=this._renderer.canvas;this.x<0?(this.x=0,this.direction>180&&this.direction>0&&(this.direction=-this.direction)):this.x>t.width&&(this.x=t.width,this.direction<180&&(this.direction=-this.direction)),this.y<0?(this.y=0,(this.direction<90||this.direction>270)&&(this.direction=180-this.direction)):this.y>t.height&&(this.y=t.height,(this.direction>90||this.direction<270)&&(this.direction=180-this.direction))},animate:function(t,e,n){this._animation={frames:t,rate:e||5,callback:n,timer:0}},getCostumeImage:function(){var t=this.costumes[this.costumeId];return this._loader.getImgFromCache(t)},update:function(){this._updateDirection(),this._updateSize(),this._updateFrames();for(var t=0;t<this._onTickFuncs.length;t++)this._onTickFuncs[t].call(this)},_updateDirection:function(){this.direction=this.direction%360,this.direction<0&&(this.direction+=360)},_updateSize:function(){var t=this.getCostumeImage();this.width=t.width*this.scale,this.height=t.height*this.scale},_updateFrames:function(){var t=this._animation;if(t.frames.length>0){var e=(new Date).getTime();e>=t.timer+1e3/t.rate&&(t.timer=e,this.costumeId=t.frames.shift(),t.frames.length<=0&&t.callback&&t.callback())}},_isTouched:function(){if(arguments[0]instanceof n)return this._touchSystem.isTouch(this,arguments[0]);var t=r.position(arguments);return this._touchSystem.isTouchDot(this,t.x,t.y)}},n.prototype.when=n.prototype.on,n.prototype.always=n.prototype.forever,e.exports=n},{"./util":15}],13:[function(t,e){function n(){this._sprites=[]}n.prototype.runOnTick=function(){this.each(function(){this.update()})},n.prototype.each=function(t){for(var e=this._sprites,n=0;n<e.length;n++)t.call(e[n],e[n])},n.prototype.removeDeletedSprites=function(){for(var t=this._sprites,e=0;e<t.length;e++)t[e]._deleted&&t.splice(e,1)},n.prototype.clear=function(){this._sprites=[]},e.exports=n},{}],14:[function(t,e){function n(t,e,n){this.canvas=t,this.ctx=t.getContext("2d"),this.renderer=new i(t,e,n),this.settings=n}var r=t("./util"),o=t("./sprite"),i=t("./renderer");n.prototype={isTouchDot:function(t,e,n){return this.isTouch(t,{x:e,y:n,width:2*this.settings.precision,height:2*this.settings.precision,direction:0,area:1})},isTouch:function(t,e){if(t.hidden||t._deleted||e.hidden||e._deleted||t===e)return!1;var n=this.getBoxOf(t),r=this.getBoxOf(e);if(!1===this.AABBJudger(n,r))return!1;var o=this.reduceAccuracy(t),i=this.reduceAccuracy(e),s=n.area<r.area?n:r;return this.reduceAccuracy(s),result=this.pixelJudger(t,e,s),o(),i(),result},getBoxOf:function(t){var e={x:t.x,y:t.y,area:t.width*t.height};if(90===t.direction||270===t.direction||"full"!==t.rotationStyle)return e.width=t.width,e.height=t.height,e;if(0===t.direction||180===t.direction)return e.width=t.height,e.height=t.width,e;var n=Math.sqrt(t.width*t.width+t.height*t.height),o=Math.asin(t.width/n),i=r.degreeToRad(t.direction)-o,s=r.degreeToRad(t.direction)+o,a=Math.abs(Math.sin(i)),c=Math.abs(Math.cos(i)),u=Math.abs(Math.sin(s)),h=Math.abs(Math.cos(s));return e.width=Math.max(c,h)*n,e.height=Math.max(a,u)*n,e.area=e.width*e.height,e},AABBJudger:function(t,e){return Math.abs(t.x-e.x)<(t.width+e.width)/2&&Math.abs(t.y-e.y)<(t.height+e.height)/2},pixelJudger:function(t,e,n){if(n.width<1||n.height<1)return!1;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.globalCompositeOperation="source-over",this.renderer.drawInstance(t),this.ctx.globalCompositeOperation="source-in",e instanceof o?this.renderer.drawInstance(e):this.ctx.fillRect(e.x,e.y,1,1);for(var r=this.ctx.getImageData(n.x-n.width/2,n.y-n.height/2,n.width,n.height).data,i=0;i<r.length;i+=4)if(r[i+3]>0)return!0;return!1},reduceAccuracy:function(t){var e=this.settings.precision,n=t.x,r=t.y,o=t.width,i=t.height,s=t.scale;return t.x/=e,t.y/=e,t.width/=e,t.height/=e,t.scale/=e,function(){t.x=n,t.y=r,t.width=o,t.height=i,t.scale=s}}},e.exports=n},{"./renderer":9,"./sprite":12,"./util":15}],15:[function(t,e){var n={isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},radToDegree:function(t){return(t%=2*Math.PI)<0&&(t+=2*Math.PI),180*t/Math.PI},degreeToRad:function(t){return(t%=360)<0&&(t+=360),t/180*Math.PI},distanceBetween:function(t,e,n,r){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-r,2))},vectorToDegree:function(t,e){var n=Math.atan2(t,-e);return this.radToDegree(n)},position:function(t){if(this.isNumeric(t[0].x)&&this.isNumeric(t[0].y))return t[0];if(this.isNumeric(t[0])&&this.isNumeric(t[1]))return{x:t[0],y:t[1]};throw"\u8acb\u50b3\u5165\u89d2\u8272(Sprite, Cursor)\u6216\u662f X, Y \u5ea7\u6a19\u503c"}};e.exports=n},{}]},{},[4]),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.io=e():t.io=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t,e){"object"===(void 0===t?"undefined":i(t))&&(e=t,t=void 0),e=e||{};var n,r=s(t),a=r.source,l=r.id,p=r.path,f=h[l]&&p in h[l].nsps;return e.forceNew||e["force new connection"]||!1===e.multiplex||f?(u("ignoring socket cache for %s",a),n=c(a,e)):(h[l]||(u("new io instance for %s",a),h[l]=c(a,e)),n=h[l]),r.query&&!e.query?e.query=r.query:e&&"object"===i(e.query)&&(e.query=o(e.query)),n.socket(r.path,e)}function o(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=n(1),a=n(7),c=n(17),u=n(3)("socket.io-client");t.exports=e=r;var h=e.managers={};e.protocol=a.protocol,e.connect=r,e.Manager=n(17),e.Socket=n(44)},function(t,e,n){(function(e){"use strict";function r(t,n){var r=t;n=n||e.location,null==t&&(t=n.protocol+"//"+n.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\/\//.test(t)||(i("protocol-less url %s",t),t=void 0!==n?n.protocol+"//"+t:"https://"+t),i("parse %s",t),r=o(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var s=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}var o=n(2),i=n(3)("socket.io-client:url");t.exports=r}).call(e,function(){return this}())},function(t){var e=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var r=t,o=t.indexOf("["),i=t.indexOf("]");-1!=o&&-1!=i&&(t=t.substring(0,o)+t.substring(o,i).replace(/:/g,";")+t.substring(i,t.length));for(var s=e.exec(t||""),a={},c=14;c--;)a[n[c]]=s[c]||"";return-1!=o&&-1!=i&&(a.source=r,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},function(t,e,n){(function(r){function o(){return"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var t=arguments,n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),!n)return t;var r="color: "+this.color,o=0,i=0;return(t=[t[0],r,"color: inherit"].concat(Array.prototype.slice.call(t,1)))[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&("%c"===t&&(i=++o))}),t.splice(i,0,r),t}function s(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}}function c(){try{return e.storage.debug}catch(t){}if(void 0!==r&&"env"in r)return r.env.DEBUG}function u(){try{return window.localStorage}catch(t){}}(e=t.exports=n(5)).log=s,e.formatArgs=i,e.save=a,e.load=c,e.useColors=o,e.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:u(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(c())}).call(e,n(4))},function(t){function e(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function r(t){if(u===setTimeout)return setTimeout(t,0);if((u===e||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(n){try{return u.call(null,t,0)}catch(n){return u.call(this,t,0)}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===n||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function i(){d&&p&&(d=!1,p.length?f=p.concat(f):y=-1,f.length&&s())}function s(){if(!d){var t=r(i);d=!0;for(var e=f.length;e;){for(p=f,f=[];++y<e;)p&&p[y].run();y=-1,e=f.length}p=null,d=!1,o(t)}}function a(t,e){this.fun=t,this.array=e}function c(){}var u,h,l=t.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:e}catch(t){u=e}try{h="function"==typeof clearTimeout?clearTimeout:n}catch(t){h=n}}();var p,f=[],d=!1,y=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];f.push(new a(t,e)),1!==f.length||d||r(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=c,l.addListener=c,l.once=c,l.off=c,l.removeListener=c,l.removeAllListeners=c,l.emit=c,l.binding=function(){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(t,e,n){function r(){return e.colors[h++%e.colors.length]}function o(t){function n(){}function o(){var t=o,n=+new Date,i=n-(u||n);t.diff=i,t.prev=u,t.curr=n,u=n,
null==t.useColors&&(t.useColors=e.useColors()),null==t.color&&t.useColors&&(t.color=r());for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var c=0;s[0]=s[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;c++;var o=e.formatters[r];if("function"==typeof o){var i=s[c];n=o.call(t,i),s.splice(c,1),c--}return n}),s=e.formatArgs.apply(t,s),(o.log||e.log||console.log.bind(console)).apply(t,s)}n.enabled=!1,o.enabled=!0;var i=e.enabled(t)?o:n;return i.namespace=t,i}function i(t){e.save(t);for(var n=(t||"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&("-"===(t=n[o].replace(/[\\^$+?.()|[\]{}]/g,"\\$&").replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))}function s(){e.enable("")}function a(t){var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1}function c(t){return t instanceof Error?t.stack||t.message:t}(e=t.exports=o.debug=o).coerce=c,e.disable=s,e.enable=i,e.enabled=a,e.humanize=n(6),e.names=[],e.skips=[],e.formatters={};var u,h=0},function(t){function e(t){if(!((t=String(t)).length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*u;case"days":case"day":case"d":return n*c;case"hours":case"hour":case"hrs":case"hr":case"h":return n*a;case"minutes":case"minute":case"mins":case"min":case"m":return n*s;case"seconds":case"second":case"secs":case"sec":case"s":return n*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function n(t){return t>=c?Math.round(t/c)+"d":t>=a?Math.round(t/a)+"h":t>=s?Math.round(t/s)+"m":t>=i?Math.round(t/i)+"s":t+"ms"}function r(t){return o(t,c,"day")||o(t,a,"hour")||o(t,s,"minute")||o(t,i,"second")||t+" ms"}function o(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}var i=1e3,s=60*i,a=60*s,c=24*a,u=365.25*c;t.exports=function(t,o){o=o||{};var i=typeof t;if("string"===i&&t.length>0)return e(t);if("number"===i&&!1===isNaN(t))return o.long?r(t):n(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,n){function r(){}function o(t){var n="",r=!1;return n+=t.type,e.BINARY_EVENT!=t.type&&e.BINARY_ACK!=t.type||(n+=t.attachments,n+="-"),t.nsp&&"/"!=t.nsp&&(r=!0,n+=t.nsp),null!=t.id&&(r&&(n+=",",r=!1),n+=t.id),null!=t.data&&(r&&(n+=","),n+=p.stringify(t.data)),l("encoded %j as %s",t,n),n}function i(t,e){function n(t){var n=d.deconstructPacket(t),r=o(n.packet),i=n.buffers;i.unshift(r),e(i)}d.removeBlobs(t,n)}function s(){this.reconstructor=null}function a(t){var n={},r=0;if(n.type=Number(t.charAt(0)),null==e.types[n.type])return h();if(e.BINARY_EVENT==n.type||e.BINARY_ACK==n.type){for(var o="";"-"!=t.charAt(++r)&&(o+=t.charAt(r),r!=t.length););if(o!=Number(o)||"-"!=t.charAt(r))throw new Error("Illegal attachments");n.attachments=Number(o)}if("/"==t.charAt(r+1))for(n.nsp="";++r;){if(","==(s=t.charAt(r)))break;if(n.nsp+=s,r==t.length)break}else n.nsp="/";var i=t.charAt(r+1);if(""!==i&&Number(i)==i){for(n.id="";++r;){var s;if(null==(s=t.charAt(r))||Number(s)!=s){--r;break}if(n.id+=t.charAt(r),r==t.length)break}n.id=Number(n.id)}return t.charAt(++r)&&(n=c(n,t.substr(r))),l("decoded %s as %j",t,n),n}function c(t,e){try{t.data=p.parse(e)}catch(t){return h()}return t}function u(t){this.reconPack=t,this.buffers=[]}function h(){return{type:e.ERROR,data:"parser error"}}var l=n(8)("socket.io-parser"),p=n(11),f=n(13),d=n(14),y=n(16);e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=r,e.Decoder=s,r.prototype.encode=function(t,n){(l("encoding packet %j",t),e.BINARY_EVENT==t.type||e.BINARY_ACK==t.type)?i(t,n):n([o(t)])},f(s.prototype),s.prototype.add=function(t){var n;if("string"==typeof t)n=a(t),e.BINARY_EVENT==n.type||e.BINARY_ACK==n.type?(this.reconstructor=new u(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!y(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",n))}},s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},u.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length==this.reconPack.attachments){var e=d.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},u.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(t,e,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var t=arguments,n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),!n)return t;var r="color: "+this.color,o=0,i=0;return(t=[t[0],r,"color: inherit"].concat(Array.prototype.slice.call(t,1)))[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&("%c"===t&&(i=++o))}),t.splice(i,0,r),t}function i(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}}function a(){var t;try{t=e.storage.debug}catch(t){}return t}function c(){try{return window.localStorage}catch(t){}}(e=t.exports=n(9)).log=i,e.formatArgs=o,e.save=s,e.load=a,e.useColors=r,e.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:c(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){return JSON.stringify(t)},e.enable(a())},function(t,e,n){function r(){return e.colors[h++%e.colors.length]}function o(t){function n(){}function o(){var t=o,n=+new Date,i=n-(u||n);t.diff=i,t.prev=u,t.curr=n,u=n,null==t.useColors&&(t.useColors=e.useColors()),null==t.color&&t.useColors&&(t.color=r());var s=Array.prototype.slice.call(arguments);s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;a++;var o=e.formatters[r];if("function"==typeof o){var i=s[a];n=o.call(t,i),s.splice(a,1),a--}return n}),"function"==typeof e.formatArgs&&(s=e.formatArgs.apply(t,s)),(o.log||e.log||console.log.bind(console)).apply(t,s)}n.enabled=!1,o.enabled=!0;var i=e.enabled(t)?o:n;return i.namespace=t,i}function i(t){e.save(t);for(var n=(t||"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&("-"===(t=n[o].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))}function s(){e.enable("")}function a(t){var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1}function c(t){return t instanceof Error?t.stack||t.message:t}(e=t.exports=o).coerce=c,e.disable=s,e.enable=i,e.enabled=a,e.humanize=n(10),e.names=[],e.skips=[],e.formatters={};var u,h=0},function(t){function e(t){if(!((t=""+t).length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*u;case"days":case"day":case"d":return n*c;case"hours":case"hour":case"hrs":case"hr":case"h":return n*a;case"minutes":case"minute":case"mins":case"min":case"m":return n*s;case"seconds":case"second":case"secs":case"sec":case"s":return n*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function n(t){return t>=c?Math.round(t/c)+"d":t>=a?Math.round(t/a)+"h":t>=s?Math.round(t/s)+"m":t>=i?Math.round(t/i)+"s":t+"ms"}function r(t){return o(t,c,"day")||o(t,a,"hour")||o(t,s,"minute")||o(t,i,"second")||t+" ms"}function o(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}var i=1e3,s=60*i,a=60*s,c=24*a,u=365.25*c;t.exports=function(t,o){return o=o||{},"string"==typeof t?e(t):o.long?r(t):n(t)}},function(t,e,n){(function(t,n){var r=!1;(function(){function o(t,e){function n(t){if(n[t]!==g)return n[t];var o;if("bug-string-char-index"==t)o="a"!="a"[0];else if("json"==t)o=n("json-stringify")&&n("json-parse");else{var s,a='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var c=e.stringify,h="function"==typeof c&&b;if(h){(s=function(){return 1}).toJSON=s;try{h="0"===c(0)&&"0"===c(new r)&&'""'==c(new i)&&c(v)===g&&c(g)===g&&c()===g&&"1"===c(s)&&"[1]"==c([s])&&"[null]"==c([g])&&"null"==c(null)&&"[null,null,null]"==c([g,v,null])&&c({a:[s,!0,!1,null,"\0\b\n\f\r\t"]})==a&&"1"===c(null,s)&&"[\n 1,\n 2\n]"==c([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==c(new u(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==c(new u(864e13))&&'"-000001-01-01T00:00:00.000Z"'==c(new u(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==c(new u(-1))}catch(t){h=!1}}o=h}if("json-parse"==t){var l=e.parse;if("function"==typeof l)try{if(0===l("0")&&!l(!1)){var p=5==(s=l(a)).a.length&&1===s.a[0];if(p){try{p=!l('"\t"')}catch(t){}if(p)try{p=1!==l("01")}catch(t){}if(p)try{p=1!==l("1.")}catch(t){}}}}catch(t){p=!1}o=p}}return n[t]=!!o}t||(t=c.Object()),e||(e=c.Object());var r=t.Number||c.Number,i=t.String||c.String,a=t.Object||c.Object,u=t.Date||c.Date,h=t.SyntaxError||c.SyntaxError,l=t.TypeError||c.TypeError,p=t.Math||c.Math,f=t.JSON||c.JSON;"object"==typeof f&&f&&(e.stringify=f.stringify,e.parse=f.parse);var d,y,g,m=a.prototype,v=m.toString,b=new u(-0xc782b5b800cec);try{b=-109252==b.getUTCFullYear()&&0===b.getUTCMonth()&&1===b.getUTCDate()&&10==b.getUTCHours()&&37==b.getUTCMinutes()&&6==b.getUTCSeconds()&&708==b.getUTCMilliseconds()}catch(t){}if(!n("json")){var w="[object Function]",x="[object Date]",k="[object Number]",A="[object String]",S="[object Array]",B="[object Boolean]",C=n("bug-string-char-index");if(!b)var _=p.floor,T=[0,31,59,90,120,151,181,212,243,273,304,334],E=function(t,e){return T[e]+365*(t-1970)+_((t-1969+(e=+(e>1)))/4)-_((t-1901+e)/100)+_((t-1601+e)/400)};if((d=m.hasOwnProperty)||(d=function(t){var e,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=v?d=function(t){var e=this.__proto__,n=t in(this.__proto__=null,this);return this.__proto__=e,n}:(e=n.constructor,d=function(t){var n=(this.constructor||e).prototype;return t in this&&!(t in n&&this[t]===n[t])}),n=null,d.call(this,t)}),y=function(t,e){var n,r,o,i=0;for(o in(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n)d.call(r,o)&&i++;return n=r=null,i?y=2==i?function(t,e){var n,r={},o=v.call(t)==w;for(n in t)o&&"prototype"==n||d.call(r,n)||!(r[n]=1)||!d.call(t,n)||e(n)}:function(t,e){var n,r,o=v.call(t)==w;for(n in t)o&&"prototype"==n||!d.call(t,n)||(r="constructor"===n)||e(n);(r||d.call(t,n="constructor"))&&e(n)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],y=function(t,e){var n,o,i=v.call(t)==w,a=!i&&"function"!=typeof t.constructor&&s[typeof t.hasOwnProperty]&&t.hasOwnProperty||d;for(n in t)i&&"prototype"==n||!a.call(t,n)||e(n);for(o=r.length;n=r[--o];a.call(t,n)&&e(n));}),y(t,e)},!n("json-stringify")){var N={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},R="000000",D=function(t,e){return(R+(e||0)).slice(-t)},j="\\u00",P=function(t){for(var e='"',n=0,r=t.length,o=!C||r>10,i=o&&(C?t.split(""):t);n<r;n++){var s=t.charCodeAt(n);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:e+=N[s];break;default:if(s<32){e+=j+D(2,s.toString(16));break}e+=o?i[n]:t.charAt(n)}}return e+'"'},O=function(t,e,n,r,o,i,s){var a,c,u,h,p,f,m,b,w,C,T,N,R,j,M,I;try{a=e[t]}catch(t){}if("object"==typeof a&&a)if((c=v.call(a))!=x||d.call(a,"toJSON"))"function"==typeof a.toJSON&&(c!=k&&c!=A&&c!=S||d.call(a,"toJSON"))&&(a=a.toJSON(t));else if(a>-1/0&&a<1/0){if(E){for(p=_(a/864e5),u=_(p/365.2425)+1970-1;E(u+1,0)<=p;u++);for(h=_((p-E(u,0))/30.42);E(u,h+1)<=p;h++);p=1+p-E(u,h),m=_((f=(a%864e5+864e5)%864e5)/36e5)%24,b=_(f/6e4)%60,w=_(f/1e3)%60,C=f%1e3}else u=a.getUTCFullYear(),h=a.getUTCMonth(),p=a.getUTCDate(),m=a.getUTCHours(),b=a.getUTCMinutes(),w=a.getUTCSeconds(),C=a.getUTCMilliseconds();a=(u<=0||u>=1e4?(u<0?"-":"+")+D(6,u<0?-u:u):D(4,u))+"-"+D(2,h+1)+"-"+D(2,p)+"T"+D(2,m)+":"+D(2,b)+":"+D(2,w)+"."+D(3,C)+"Z"}else a=null;if(n&&(a=n.call(e,t,a)),null===a)return"null";if((c=v.call(a))==B)return""+a;if(c==k)return a>-1/0&&a<1/0?""+a:"null";if(c==A)return P(""+a);if("object"==typeof a){for(j=s.length;j--;)if(s[j]===a)throw l();if(s.push(a),T=[],M=i,i+=o,c==S){for(R=0,j=a.length;R<j;R++)N=O(R,a,n,r,o,i,s),T.push(N===g?"null":N);I=T.length?o?"[\n"+i+T.join(",\n"+i)+"\n"+M+"]":"["+T.join(",")+"]":"[]"}else y(r||a,function(t){var e=O(t,a,n,r,o,i,s);e!==g&&T.push(P(t)+":"+(o?" ":"")+e)}),I=T.length?o?"{\n"+i+T.join(",\n"+i)+"\n"+M+"}":"{"+T.join(",")+"}":"{}";return s.pop(),I}};e.stringify=function(t,e,n){var r,o,i,a;if(s[typeof e]&&e)if((a=v.call(e))==w)o=e;else if(a==S){i={};for(var c,u=0,h=e.length;u<h;c=e[u++],((a=v.call(c))==A||a==k)&&(i[c]=1));}if(n)if((a=v.call(n))==k){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else a==A&&(r=n.length<=10?n:n.slice(0,10));return O("",((c={})[""]=t,c),o,i,r,"",[])}}if(!n("json-parse")){var M,I,L=i.fromCharCode,q={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},U=function(){throw M=I=null,h()},F=function(){for(var t,e,n,r,o,i=I,s=i.length;M<s;)switch(o=i.charCodeAt(M)){case 9:case 10:case 13:case 32:M++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=C?i.charAt(M):i[M],M++,t;case 34:for(t="@",M++;M<s;)if((o=i.charCodeAt(M))<32)U();else if(92==o)switch(o=i.charCodeAt(++M)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=q[o],M++;break;case 117:for(e=++M,n=M+4;M<n;M++)(o=i.charCodeAt(M))>=48&&o<=57||o>=97&&o<=102||o>=65&&o<=70||U();t+=L("0x"+i.slice(e,M));break;default:U()}else{if(34==o)break;for(o=i.charCodeAt(M),e=M;o>=32&&92!=o&&34!=o;)o=i.charCodeAt(++M);t+=i.slice(e,M)}if(34==i.charCodeAt(M))return M++,t;U();default:if(e=M,45==o&&(r=!0,o=i.charCodeAt(++M)),o>=48&&o<=57){for(48==o&&((o=i.charCodeAt(M+1))>=48&&o<=57)&&U(),r=!1;M<s&&((o=i.charCodeAt(M))>=48&&o<=57);M++);if(46==i.charCodeAt(M)){for(n=++M;n<s&&((o=i.charCodeAt(n))>=48&&o<=57);n++);n==M&&U(),M=n}if(101==(o=i.charCodeAt(M))||69==o){for(43!=(o=i.charCodeAt(++M))&&45!=o||M++,n=M;n<s&&((o=i.charCodeAt(n))>=48&&o<=57);n++);n==M&&U(),M=n}return+i.slice(e,M)}if(r&&U(),"true"==i.slice(M,M+4))return M+=4,!0;if("false"==i.slice(M,M+5))return M+=5,!1;if("null"==i.slice(M,M+4))return M+=4,null;U()}return"$"},H=function(t){var e,n;if("$"==t&&U(),"string"==typeof t){if("@"==(C?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];"]"!=(t=F());n||(n=!0))n&&(","==t?"]"==(t=F())&&U():U()),","==t&&U(),e.push(H(t));return e}if("{"==t){for(e={};"}"!=(t=F());n||(n=!0))n&&(","==t?"}"==(t=F())&&U():U()),","!=t&&"string"==typeof t&&"@"==(C?t.charAt(0):t[0])&&":"==F()||U(),e[t.slice(1)]=H(F());return e}U()}return t},J=function(t,e,n){var r=z(t,e,n);r===g?delete t[e]:t[e]=r},z=function(t,e,n){var r,o=t[e];if("object"==typeof o&&o)if(v.call(o)==S)for(r=o.length;r--;)J(o,r,n);else y(o,function(t){J(o,t,n)});return n.call(t,e,o)};e.parse=function(t,e){var n,r;return M=0,I=""+t,n=H(F()),"$"!=F()&&U(),M=I=null,e&&v.call(e)==w?z(((r={})[""]=n,r),"",e):n}}}return e.runInContext=o,e}var i="function"==typeof r&&r.amd,s={"function":!0,object:!0},a=s[typeof e]&&e&&!e.nodeType&&e,c=s[typeof window]&&window||this,u=a&&s[typeof t]&&t&&!t.nodeType&&"object"==typeof n&&n;if(!u||u.global!==u&&u.window!==u&&u.self!==u||(c=u),a&&!i)o(c,a);else{var h=c.JSON,l=c.JSON3,p=!1,f=o(c,c.JSON3={noConflict:function(){return p||(p=!0,c.JSON=h,c.JSON3=l,h=l=null),f}});c.JSON={parse:f.parse,stringify:f.stringify}}i&&r(function(){return f})}).call(this)}).call(e,n(12)(t),function(){return this}())},function(t){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t){function e(t){if(t)return n(t)}function n(t){for(var n in e.prototype)t[n]=e.prototype[n];return t}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},e.prototype.once=function(t,e){function n(){r.off(t,n),e.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},n.fn=e,this.on(t,n),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[t];if(!n)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var r,o=0;o<n.length;o++)if((r=n[o])===e||r.fn===e){n.splice(o,1);break}return this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks[t];if(n)for(var r=0,o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,e);return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,n){(function(t){var r=n(15),o=n(16);e.deconstructPacket=function(t){function e(t){if(!t)return t;if(o(t)){var i={_placeholder:!0,num:n.length};return n.push(t),i}if(r(t)){for(var s=new Array(t.length),a=0;a<t.length;a++)s[a]=e(t[a]);return s}if("object"==typeof t&&!(t instanceof Date)){s={};for(var c in t)s[c]=e(t[c]);return s}return t}var n=[],i=t.data,s=t;return s.data=e(i),s.attachments=n.length,{packet:s,buffers:n}},e.reconstructPacket=function(t,e){function n(t){if(t&&t._placeholder)return e[t.num];if(r(t)){for(var o=0;o<t.length;o++)t[o]=n(t[o]);return t}if(t&&"object"==typeof t){for(var i in t)t[i]=n(t[i]);return t}return t}return t.data=n(t.data),t.attachments=void 0,t},e.removeBlobs=function(e,n){function i(e,c,u){if(!e)return e;if(t.Blob&&e instanceof Blob||t.File&&e instanceof File){s++;var h=new FileReader;h.onload=function(){u?u[c]=this.result:a=this.result,--s||n(a)},h.readAsArrayBuffer(e)}else if(r(e))for(var l=0;l<e.length;l++)i(e[l],l,e);else if(e&&"object"==typeof e&&!o(e))for(var p in e)i(e[p],p,e)}var s=0,a=e;i(a),s||n(a)}}).call(e,function(){return this}())},function(t){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e){(function(e){function n(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}t.exports=n}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t,e){return this instanceof r?(t&&"object"===(void 0===t?"undefined":o(t))&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new c.Encoder,this.decoder=new c.Decoder,this.autoConnect=!1!==e.autoConnect,void(this.autoConnect&&this.open())):new r(t,e)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(18),s=n(44),a=n(35),c=n(7),u=n(46),h=n(47),l=n(3)("socket.io-client:manager"),p=n(42),f=n(48),d=Object.prototype.hasOwnProperty;t.exports=r,r.prototype.emitAll=function(){for(var t in this.emit.apply(this,arguments),this.nsps)d.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},r.prototype.updateSocketIds=function(){for(var t in this.nsps)d.call(this.nsps,t)&&(this.nsps[t].id=this.engine.id)},a(r.prototype),r.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},r.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},r.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},r.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},r.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},r.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},r.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},r.prototype.open=r.prototype.connect=function(t){if(l("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;l("opening %s",this.uri),this.engine=i(this.uri,this.opts);var e=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var r=u(e,"open",function(){n.onopen(),t&&t()}),o=u(e,"error",function(e){if(l("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",e),t){var r=new Error("Connection error");r.data=e,t(r)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var s=this._timeout;l("connect attempt will timeout after %d",s);var a=setTimeout(function(){l("connect attempt timed out after %d",s),r.destroy(),e.close(),e.emit("error","timeout"),n.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(a)}})}return this.subs.push(r),this.subs.push(o),this},r.prototype.onopen=function(){l("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(u(t,"data",h(this,"ondata"))),this.subs.push(u(t,"ping",h(this,"onping"))),this.subs.push(u(t,"pong",h(this,"onpong"))),this.subs.push(u(t,"error",h(this,"onerror"))),this.subs.push(u(t,"close",h(this,"onclose"))),this.subs.push(u(this.decoder,"decoded",h(this,"ondecoded")))},r.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},r.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},r.prototype.ondata=function(t){this.decoder.add(t)},r.prototype.ondecoded=function(t){this.emit("packet",t)},r.prototype.onerror=function(t){l("error",t),this.emitAll("error",t)},r.prototype.socket=function(t,e){function n(){~p(o.connecting,r)||o.connecting.push(r)}var r=this.nsps[t];if(!r){r=new s(this,t,e),this.nsps[t]=r;var o=this;r.on("connecting",n),r.on("connect",function(){r.id=o.engine.id}),this.autoConnect&&n()}return r},r.prototype.destroy=function(t){var e=p(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},r.prototype.packet=function(t){l("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(n){for(var r=0;r<n.length;r++)e.engine.write(n[r],t.options);e.encoding=!1,e.processPacketQueue()}))},r.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},r.prototype.cleanup=function(){l("cleanup");for(var t=this.subs.length,e=0;e<t;e++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},r.prototype.close=r.prototype.disconnect=function(){l("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},r.prototype.onclose=function(t){l("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},r.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)l("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();l("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var n=setTimeout(function(){t.skipReconnect||(l("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(l("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(l("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(n)}})}},r.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},function(t,e,n){t.exports=n(19)},function(t,e,n){t.exports=n(20),t.exports.parser=n(27)},function(t,e,n){(function(e){function r(t,n){if(!(this instanceof r))return new r(t,n);n=n||{},t&&"object"==typeof t&&(n=t,t=null),t?(t=h(t),n.hostname=t.host,n.secure="https"===t.protocol||"wss"===t.protocol,n.port=t.port,t.query&&(n.query=t.query)):n.host&&(n.hostname=h(n.host).host),this.secure=null!=n.secure?n.secure:e.location&&"https:"===location.protocol,n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.agent=n.agent||!1,this.hostname=n.hostname||(e.location?location.hostname:"localhost"),this.port=n.port||(e.location&&location.port?location.port:this.secure?443:80),this.query=n.query||{},"string"==typeof this.query&&(this.query=p.decode(this.query)),this.upgrade=!1!==n.upgrade,this.path=(n.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!n.forceJSONP,this.jsonp=!1!==n.jsonp,this.forceBase64=!!n.forceBase64,this.enablesXDR=!!n.enablesXDR,this.timestampParam=n.timestampParam||"t",this.timestampRequests=n.timestampRequests,this.transports=n.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=n.policyPort||843,this.rememberUpgrade=n.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=n.onlyBinaryUpgrades,this.perMessageDeflate=!1!==n.perMessageDeflate&&(n.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=n.pfx||null,this.key=n.key||null,this.passphrase=n.passphrase||null,this.cert=n.cert||null,this.ca=n.ca||null,this.ciphers=n.ciphers||null,this.rejectUnauthorized=void 0===n.rejectUnauthorized?null:n.rejectUnauthorized,this.forceNode=!!n.forceNode;var o="object"==typeof e&&e;o.global===o&&(n.extraHeaders&&Object.keys(n.extraHeaders).length>0&&(this.extraHeaders=n.extraHeaders),n.localAddress&&(this.localAddress=n.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function o(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var i=n(21),s=n(35),a=n(3)("engine.io-client:socket"),c=n(42),u=n(27),h=n(2),l=n(43),p=n(36);t.exports=r,r.priorWebsocketSuccess=!1,s(r.prototype),r.protocol=u.protocol,r.Socket=r,r.Transport=n(26),r.transports=n(21),r.parser=n(27),r.prototype.createTransport=function(t){a('creating transport "%s"',t);var e=o(this.query);return e.EIO=u.protocol,e.transport=t,this.id&&(e.sid=this.id),new i[t]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:e,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders,forceNode:this.forceNode,localAddress:this.localAddress})},r.prototype.open=function(){var t;if(this.rememberUpgrade&&r.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},r.prototype.setTransport=function(t){a("setting transport %s",t.name);var e=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},r.prototype.probe=function(t){function e(){if(p.onlyBinaryUpgrades){var e=!this.supportsBinary&&p.transport.supportsBinary;l=l||e}l||(a('probe transport "%s" opened',t),h.send([{type:"ping",data:"probe"}]),h.once("packet",function(e){if(!l)if("pong"===e.type&&"probe"===e.data){if(a('probe transport "%s" pong',t),p.upgrading=!0,p.emit("upgrading",h),!h)return;r.priorWebsocketSuccess="websocket"===h.name,a('pausing current transport "%s"',p.transport.name),p.transport.pause(function(){l||"closed"!==p.readyState&&(a("changing transport and sending upgrade packet"),u(),p.setTransport(h),h.send([{type:"upgrade"}]),p.emit("upgrade",h),h=null,p.upgrading=!1,p.flush())})}else{a('probe transport "%s" failed',t);var n=new Error("probe error");n.transport=h.name,p.emit("upgradeError",n)}}))}function n(){l||(l=!0,u(),h.close(),h=null)}function o(e){var r=new Error("probe error: "+e);r.transport=h.name,n(),a('probe transport "%s" failed because of error: %s',t,e),p.emit("upgradeError",r)}function i(){o("transport closed")}function s(){o("socket closed")}function c(t){h&&t.name!==h.name&&(a('"%s" works - aborting "%s"',t.name,h.name),n())}function u(){h.removeListener("open",e),h.removeListener("error",o),h.removeListener("close",i),p.removeListener("close",s),p.removeListener("upgrading",c)}a('probing transport "%s"',t);var h=this.createTransport(t,{probe:1}),l=!1,p=this;r.priorWebsocketSuccess=!1,h.once("open",e),h.once("error",o),h.once("close",i),this.once("close",s),this.once("upgrading",c),h.open()},r.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",r.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},r.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(a('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(l(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else a('packet received with socket readyState "%s"',this.readyState)},r.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},r.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!==e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},r.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){a("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},
r.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})},r.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},r.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},r.prototype.write=r.prototype.send=function(t,e,n){return this.sendPacket("message",t,e,n),this},r.prototype.sendPacket=function(t,e,n,r){if("function"==typeof e&&(r=e,e=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var o={type:t,data:e,options:n};this.emit("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}},r.prototype.close=function(){function t(){r.onClose("forced close"),a("socket closing - telling transport to close"),r.transport.close()}function e(){r.removeListener("upgrade",e),r.removeListener("upgradeError",e),t()}function n(){r.once("upgrade",e),r.once("upgradeError",e)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var r=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():t()}):this.upgrading?n():t()}return this},r.prototype.onError=function(t){a("socket error %j",t),r.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},r.prototype.onClose=function(t,e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){a('socket close with reason: "%s"',t);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),n.writeBuffer=[],n.prevBufferLen=0}},r.prototype.filterUpgrades=function(t){for(var e=[],n=0,r=t.length;n<r;n++)~c(this.transports,t[n])&&e.push(t[n]);return e}}).call(e,function(){return this}())},function(t,e,n){(function(t){function r(e){var n=!1,r=!1,a=!1!==e.jsonp;if(t.location){var c="https:"===location.protocol,u=location.port;u||(u=c?443:80),n=e.hostname!==location.hostname||u!==e.port,r=e.secure!==c}if(e.xdomain=n,e.xscheme=r,"open"in new o(e)&&!e.forceJSONP)return new i(e);if(!a)throw new Error("JSONP disabled");return new s(e)}var o=n(22),i=n(24),s=n(39),a=n(40);e.polling=r,e.websocket=a}).call(e,function(){return this}())},function(t,e,n){(function(e){var r=n(23);t.exports=function(t){var n=t.xdomain,o=t.xscheme,i=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!n||r))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!o&&i)return new XDomainRequest}catch(t){}if(!n)try{return new(e[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}}).call(e,function(){return this}())},function(t){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},function(t,e,n){(function(e){function r(){}function o(t){if(c.call(this,t),this.requestTimeout=t.requestTimeout,e.location){var n="https:"===location.protocol,r=location.port;r||(r=n?443:80),this.xd=t.hostname!==e.location.hostname||r!==t.port,this.xs=t.secure!==n}else this.extraHeaders=t.extraHeaders}function i(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function s(){for(var t in i.requests)i.requests.hasOwnProperty(t)&&i.requests[t].abort()}var a=n(22),c=n(25),u=n(35),h=n(37),l=n(3)("engine.io-client:polling-xhr");t.exports=o,t.exports.Request=i,h(o,c),o.prototype.supportsBinary=!0,o.prototype.request=function(t){return(t=t||{}).uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new i(t)},o.prototype.doWrite=function(t,e){var n="string"!=typeof t&&void 0!==t,r=this.request({method:"POST",data:t,isBinary:n}),o=this;r.on("success",e),r.on("error",function(t){o.onError("xhr post error",t)}),this.sendXhr=r},o.prototype.doPoll=function(){l("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},u(i.prototype),i.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var n=this.xhr=new a(t),r=this;try{l("xhr open %s: %s",this.method,this.uri),n.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var o in n.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&n.setRequestHeader(o,this.extraHeaders[o])}catch(t){}if(this.supportsBinary&&(n.responseType="arraybuffer"),"POST"===this.method)try{this.isBinary?n.setRequestHeader("Content-type","application/octet-stream"):n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{n.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in n&&(n.withCredentials=!0),this.requestTimeout&&(n.timeout=this.requestTimeout),this.hasXDR()?(n.onload=function(){r.onLoad()},n.onerror=function(){r.onError(n.responseText)}):n.onreadystatechange=function(){4===n.readyState&&(200===n.status||1223===n.status?r.onLoad():setTimeout(function(){r.onError(n.status)},0))},l("xhr data %s",this.data),n.send(this.data)}catch(t){return void setTimeout(function(){r.onError(t)},0)}e.document&&(this.index=i.requestsCount++,i.requests[this.index]=this)},i.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},i.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},i.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},i.prototype.cleanup=function(t){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=r:this.xhr.onreadystatechange=r,t)try{this.xhr.abort()}catch(t){}e.document&&delete i.requests[this.index],this.xhr=null}},i.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(t){}if("application/octet-stream"===e)t=this.xhr.response||this.xhr.responseText;else if(this.supportsBinary)try{t=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(e){for(var n=new Uint8Array(this.xhr.response),r=[],o=0,i=n.length;o<i;o++)r.push(n[o]);t=String.fromCharCode.apply(null,r)}else t=this.xhr.responseText}catch(t){this.onError(t)}null!=t&&this.onData(t)},i.prototype.hasXDR=function(){return"undefined"!=typeof e.XDomainRequest&&!this.xs&&this.enablesXDR},i.prototype.abort=function(){this.cleanup()},i.requestsCount=0,i.requests={},e.document&&(e.attachEvent?e.attachEvent("onunload",s):e.addEventListener&&e.addEventListener("beforeunload",s,!1))}).call(e,function(){return this}())},function(t,e,n){function r(t){var e=t&&t.forceBase64;h&&!e||(this.supportsBinary=!1),o.call(this,t)}var o=n(26),i=n(36),s=n(27),a=n(37),c=n(38),u=n(3)("engine.io-client:polling");t.exports=r;var h=null!=new(n(22))({xdomain:!1}).responseType;a(r,o),r.prototype.name="polling",r.prototype.doOpen=function(){this.poll()},r.prototype.pause=function(t){function e(){u("paused"),n.readyState="paused",t()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(u("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){u("pre-pause polling complete"),--r||e()})),this.writable||(u("we are currently writing - waiting to pause"),r++,this.once("drain",function(){u("pre-pause writing complete"),--r||e()}))}else e()},r.prototype.poll=function(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},r.prototype.onData=function(t){var e=this;u("polling got data %s",t);var n=function(t){return"opening"===e.readyState&&e.onOpen(),"close"===t.type?(e.onClose(),!1):void e.onPacket(t)};s.decodePayload(t,this.socket.binaryType,n),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():u('ignoring poll - transport state "%s"',this.readyState))},r.prototype.doClose=function(){function t(){u("writing close packet"),e.write([{type:"close"}])}var e=this;"open"===this.readyState?(u("transport open - closing"),t()):(u("transport not open - deferring close"),this.once("open",t))},r.prototype.write=function(t){var e=this;this.writable=!1;var n=function(){e.writable=!0,e.emit("drain")};s.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,n)})},r.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(t[this.timestampParam]=c()),this.supportsBinary||t.sid||(t.b64=1),t=i.encode(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(n=":"+this.port),t.length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t}},function(t,e,n){function r(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}var o=n(27),i=n(35);t.exports=r,i(r.prototype),r.prototype.onError=function(t,e){var n=new Error(t);return n.type="TransportError",n.description=e,this.emit("error",n),this},r.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},r.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},r.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},r.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},r.prototype.onData=function(t){var e=o.decodePacket(t,this.socket.binaryType);this.onPacket(e)},r.prototype.onPacket=function(t){this.emit("packet",t)},r.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(t,e,n){(function(t){function r(t,n){return n("b"+e.packets[t.type]+t.data.data)}function o(t,n,r){if(!n)return e.encodeBase64Packet(t,r);var o=t.data,i=new Uint8Array(o),s=new Uint8Array(1+o.byteLength);s[0]=v[t.type];for(var a=0;a<i.length;a++)s[a+1]=i[a];return r(s.buffer)}function i(t,n,r){if(!n)return e.encodeBase64Packet(t,r);var o=new FileReader;return o.onload=function(){t.data=o.result,e.encodePacket(t,n,!0,r)},o.readAsArrayBuffer(t.data)}function s(t,n,r){if(!n)return e.encodeBase64Packet(t,r);if(m)return i(t,n,r);var o=new Uint8Array(1);return o[0]=v[t.type],r(new x([o.buffer,t.data]))}function a(t){try{t=d.decode(t)}catch(t){return!1}return t}function c(t,e,n){for(var r=new Array(t.length),o=f(t.length,n),i=function(t,n,o){e(n,function(e,n){r[t]=n,o(e,r)})},s=0;s<t.length;s++)i(s,t[s],o)}var u,h=n(28),l=n(29),p=n(30),f=n(31),d=n(32);t&&t.ArrayBuffer&&(u=n(33));var y="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),g="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),m=y||g;e.protocol=3;var v=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},b=h(v),w={type:"error",data:"parser error"},x=n(34);e.encodePacket=function(e,n,i,a){"function"==typeof n&&(a=n,n=!1),"function"==typeof i&&(a=i,i=null);var c=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&c instanceof ArrayBuffer)return o(e,n,a);if(x&&c instanceof t.Blob)return s(e,n,a);if(c&&c.base64)return r(e,a);var u=v[e.type];return void 0!==e.data&&(u+=i?d.encode(String(e.data)):String(e.data)),a(""+u)},e.encodeBase64Packet=function(n,r){var o,i="b"+e.packets[n.type];if(x&&n.data instanceof t.Blob){var s=new FileReader;return s.onload=function(){var t=s.result.split(",")[1];r(i+t)},s.readAsDataURL(n.data)}try{o=String.fromCharCode.apply(null,new Uint8Array(n.data))}catch(t){for(var a=new Uint8Array(n.data),c=new Array(a.length),u=0;u<a.length;u++)c[u]=a[u];o=String.fromCharCode.apply(null,c)}return i+=t.btoa(o),r(i)},e.decodePacket=function(t,n,r){if(void 0===t)return w;if("string"==typeof t){if("b"==t.charAt(0))return e.decodeBase64Packet(t.substr(1),n);if(r&&!1===(t=a(t)))return w;var o=t.charAt(0);return Number(o)==o&&b[o]?t.length>1?{type:b[o],data:t.substring(1)}:{type:b[o]}:w}o=new Uint8Array(t)[0];var i=p(t,1);return x&&"blob"===n&&(i=new x([i])),{type:b[o],data:i}},e.decodeBase64Packet=function(t,e){var n=b[t.charAt(0)];if(!u)return{type:n,data:{base64:!0,data:t.substr(1)}};var r=u.decode(t.substr(1));return"blob"===e&&x&&(r=new x([r])),{type:n,data:r}},e.encodePayload=function(t,n,r){function o(t){return t.length+":"+t}function i(t,r){e.encodePacket(t,!!s&&n,!0,function(t){r(null,o(t))})}"function"==typeof n&&(r=n,n=null);var s=l(t);return n&&s?x&&!m?e.encodePayloadAsBlob(t,r):e.encodePayloadAsArrayBuffer(t,r):t.length?void c(t,i,function(t,e){return r(e.join(""))}):r("0:")},e.decodePayload=function(t,n,r){if("string"!=typeof t)return e.decodePayloadAsBinary(t,n,r);var o;if("function"==typeof n&&(r=n,n=null),""==t)return r(w,0,1);for(var i,s,a="",c=0,u=t.length;c<u;c++){var h=t.charAt(c);if(":"!=h)a+=h;else{if(""==a||a!=(i=Number(a)))return r(w,0,1);if(a!=(s=t.substr(c+1,i)).length)return r(w,0,1);if(s.length){if(o=e.decodePacket(s,n,!0),w.type==o.type&&w.data==o.data)return r(w,0,1);if(!1===r(o,c+i,u))return}c+=i,a=""}}return""!=a?r(w,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,n){function r(t,n){e.encodePacket(t,!0,!0,function(t){return n(null,t)})}return t.length?void c(t,r,function(t,e){var r=e.reduce(function(t,e){var n;return t+(n="string"==typeof e?e.length:e.byteLength).toString().length+n+2},0),o=new Uint8Array(r),i=0;return e.forEach(function(t){var e="string"==typeof t,n=t;if(e){for(var r=new Uint8Array(t.length),s=0;s<t.length;s++)r[s]=t.charCodeAt(s);n=r.buffer}o[i++]=e?0:1;var a=n.byteLength.toString();for(s=0;s<a.length;s++)o[i++]=parseInt(a[s]);o[i++]=255;for(r=new Uint8Array(n),s=0;s<r.length;s++)o[i++]=r[s]}),n(o.buffer)}):n(new ArrayBuffer(0))},e.encodePayloadAsBlob=function(t,n){function r(t,n){e.encodePacket(t,!0,!0,function(t){var e=new Uint8Array(1);if(e[0]=1,"string"==typeof t){for(var r=new Uint8Array(t.length),o=0;o<t.length;o++)r[o]=t.charCodeAt(o);t=r.buffer,e[0]=0}var i=(t instanceof ArrayBuffer?t.byteLength:t.size).toString(),s=new Uint8Array(i.length+1);for(o=0;o<i.length;o++)s[o]=parseInt(i[o]);if(s[i.length]=255,x){var a=new x([e.buffer,s.buffer,t]);n(null,a)}})}c(t,r,function(t,e){return n(new x(e))})},e.decodePayloadAsBinary=function(t,n,r){"function"==typeof n&&(r=n,n=null);for(var o=t,i=[],s=!1;o.byteLength>0;){for(var a=new Uint8Array(o),c=0===a[0],u="",h=1;255!=a[h];h++){if(u.length>310){s=!0;break}u+=a[h]}if(s)return r(w,0,1);o=p(o,2+u.length),u=parseInt(u);var l=p(o,0,u);if(c)try{l=String.fromCharCode.apply(null,new Uint8Array(l))}catch(t){var f=new Uint8Array(l);l="";for(h=0;h<f.length;h++)l+=String.fromCharCode(f[h])}i.push(l),o=p(o,u)}var d=i.length;i.forEach(function(t,o){r(e.decodePacket(t,n,!0),o,d)})}}).call(e,function(){return this}())},function(t){t.exports=Object.keys||function(t){var e=[],n=Object.prototype.hasOwnProperty;for(var r in t)n.call(t,r)&&e.push(r);return e}},function(t,e,n){(function(e){function r(t){function n(t){if(!t)return!1;if(e.Buffer&&e.Buffer.isBuffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer||e.Blob&&t instanceof Blob||e.File&&t instanceof File)return!0;if(o(t)){for(var r=0;r<t.length;r++)if(n(t[r]))return!0}else if(t&&"object"==typeof t)for(var i in t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),t)if(Object.prototype.hasOwnProperty.call(t,i)&&n(t[i]))return!0;return!1}return n(t)}var o=n(15);t.exports=r}).call(e,function(){return this}())},function(t){t.exports=function(t,e,n){var r=t.byteLength;if(e=e||0,n=n||r,t.slice)return t.slice(e,n);if(e<0&&(e+=r),n<0&&(n+=r),n>r&&(n=r),e>=r||e>=n||0===r)return new ArrayBuffer(0);for(var o=new Uint8Array(t),i=new Uint8Array(n-e),s=e,a=0;s<n;s++,a++)i[a]=o[s];return i.buffer}},function(t){function e(t,e,r){function o(t,n){if(o.count<=0)throw new Error("after called too many times");--o.count,t?(i=!0,e(t),e=r):0!==o.count||i||e(null,n)}var i=!1;return r=r||n,o.count=t,0===t?e():o}function n(){}t.exports=e},function(t,e,n){var r;(function(t,o){!function(){function i(t){for(var e,n,r=[],o=0,i=t.length;o<i;)(e=t.charCodeAt(o++))>=55296&&e<=56319&&o<i?56320==(64512&(n=t.charCodeAt(o++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--):r.push(e);return r}function s(t){for(var e,n=t.length,r=-1,o="";++r<n;)(e=t[r])>65535&&(o+=m((e-=65536)>>>10&1023|55296),e=56320|1023&e),o+=m(e);return o}function a(t,e){return m(t>>e&63|128)}function c(t){if(0==(4294967168&t))return m(t);var e="";return 0==(4294965248&t)?e=m(t>>6&31|192):0==(4294901760&t)?(e=m(t>>12&15|224),e+=a(t,6)):0==(4292870144&t)&&(e=m(t>>18&7|240),e+=a(t,12),e+=a(t,6)),e+m(63&t|128)}function u(t){for(var e=i(t),n=e.length,r=-1,o="";++r<n;)o+=c(e[r]);return o}function h(){if(g>=y)throw Error("Invalid byte index");var t=255&d[g];if(g++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function l(){var t,e;if(g>y)throw Error("Invalid byte index");if(g==y)return!1;if(t=255&d[g],g++,0==(128&t))return t;if(192==(224&t)){if((e=(31&t)<<6|h())>=128)return e;throw Error("Invalid continuation byte")}if(224==(240&t)){if((e=(15&t)<<12|h()<<6|h())>=2048)return e;throw Error("Invalid continuation byte")}if(240==(248&t)&&((e=(15&t)<<18|h()<<12|h()<<6|h())>=65536&&e<=1114111))return e;throw Error("Invalid WTF-8 detected")}function p(t){d=i(t),y=d.length,g=0;for(var e,n=[];!1!==(e=l());)n.push(e);return s(n)}var f=("object"==typeof t&&t&&t.exports,"object"==typeof o&&o);f.global!==f&&f.window;var d,y,g,m=String.fromCharCode,v={version:"1.0.0",encode:u,decode:p};void 0===(r=function(){return v}.call(e,n,e,t))||(t.exports=r)}()}).call(e,n(12)(t),function(){return this}())},function(t,e){!function(){"use strict";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),r=0;r<t.length;r++)n[t.charCodeAt(r)]=r;e.encode=function(e){var n,r=new Uint8Array(e),o=r.length,i="";for(n=0;n<o;n+=3)i+=t[r[n]>>2],i+=t[(3&r[n])<<4|r[n+1]>>4],i+=t[(15&r[n+1])<<2|r[n+2]>>6],i+=t[63&r[n+2]];return o%3==2?i=i.substring(0,i.length-1)+"=":o%3==1&&(i=i.substring(0,i.length-2)+"=="),i},e.decode=function(t){var e,r,o,i,s,a=.75*t.length,c=t.length,u=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var h=new ArrayBuffer(a),l=new Uint8Array(h);for(e=0;e<c;e+=4)r=n[t.charCodeAt(e)],o=n[t.charCodeAt(e+1)],i=n[t.charCodeAt(e+2)],s=n[t.charCodeAt(e+3)],l[u++]=r<<2|o>>4,l[u++]=(15&o)<<4|i>>2,l[u++]=(3&i)<<6|63&s;return h}}()},function(t,e){(function(e){function n(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.buffer instanceof ArrayBuffer){var r=n.buffer;if(n.byteLength!==r.byteLength){var o=new Uint8Array(n.byteLength);o.set(new Uint8Array(r,n.byteOffset,n.byteLength)),r=o.buffer}t[e]=r}}}function r(t,e){e=e||{};var r=new i;n(t);for(var o=0;o<t.length;o++)r.append(t[o]);return e.type?r.getBlob(e.type):r.getBlob()}function o(t,e){return n(t),new Blob(t,e||{})}var i=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,s=function(){try{var t=new Blob(["hi"]);return 2===t.size}catch(t){return!1}}(),a=s&&function(){try{var t=new Blob([new Uint8Array([1,2])]);return 2===t.size}catch(t){return!1}}(),c=i&&i.prototype.append&&i.prototype.getBlob;t.exports=s?a?e.Blob:o:c?r:void 0}).call(e,function(){return this}())},function(t){function e(t){if(t)return n(t)}function n(t){for(var n in e.prototype)t[n]=e.prototype[n];return t}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},e.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r,o=0;o<n.length;o++)if((r=n[o])===e||r.fn===e){n.splice(o,1);break}return this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n)for(var r=0,o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,e);return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e){e.encode=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},e.decode=function(t){for(var e={},n=t.split("&"),r=0,o=n.length;r<o;r++){var i=n[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}},function(t){t.exports=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t){"use strict";function e(t){var e="";do{e=i[t%s]+e,t=Math.floor(t/s)}while(t>0);return e}function n(t){var e=0;for(u=0;u<t.length;u++)e=e*s+a[t.charAt(u)];return e}function r(){var t=e(+new Date);return t!==o?(c=0,o=t):t+"."+e(c++)}for(var o,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),s=64,a={},c=0,u=0;u<s;u++)a[i[u]]=u;r.encode=e,r.decode=n,t.exports=r},function(t,e,n){(function(e){function r(){}function o(t){i.call(this,t),this.query=this.query||{},a||(e.___eio||(e.___eio=[]),a=e.___eio),this.index=a.length;var n=this;a.push(function(t){n.onData(t)}),this.query.j=this.index,e.document&&e.addEventListener&&e.addEventListener("beforeunload",function(){n.script&&(n.script.onerror=r)},!1)}var i=n(25),s=n(37);t.exports=o;var a,c=/\n/g,u=/\\n/g;s(o,i),o.prototype.supportsBinary=!1,o.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},o.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(e,n):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},o.prototype.doWrite=function(t,e){function n(){r(),e()}function r(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(t){o.onError("jsonp polling iframe removal error",t)}try{var t='<iframe src="javascript:0" name="'+o.iframeId+'">';i=document.createElement(t)}catch(t){(i=document.createElement("iframe")).name=o.iframeId,i.src="javascript:0"}i.id=o.iframeId,o.form.appendChild(i),o.iframe=i}var o=this;if(!this.form){var i,s=document.createElement("form"),a=document.createElement("textarea"),h=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=h,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),r(),t=t.replace(u,"\\\n"),this.area.value=t.replace(c,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===o.iframe.readyState&&n()}:this.iframe.onload=n}}).call(e,function(){return this}())},function(t,e,n){(function(e){function r(t){t&&t.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=l&&!t.forceNode,this.usingBrowserWebSocket||(p=o),i.call(this,t)}var o,i=n(26),s=n(27),a=n(36),c=n(37),u=n(38),h=n(3)("engine.io-client:websocket"),l=e.WebSocket||e.MozWebSocket;if("undefined"==typeof window)try{o=n(41)}catch(t){}var p=l;p||"undefined"!=typeof window||(p=o),t.exports=r,c(r,i),r.prototype.name="websocket",r.prototype.supportsBinary=!0,r.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=void 0,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?new p(t):new p(t,e,n)}catch(t){return this.emit("error",t)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},r.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},r.prototype.write=function(t){function n(){r.emit("flush"),setTimeout(function(){r.writable=!0,r.emit("drain")},0)}var r=this;this.writable=!1;for(var o=t.length,i=0,a=o;i<a;i++)!function(t){s.encodePacket(t,r.supportsBinary,function(i){if(!r.usingBrowserWebSocket){var s={};if(t.options&&(s.compress=t.options.compress),r.perMessageDeflate)("string"==typeof i?e.Buffer.byteLength(i):i.length)<r.perMessageDeflate.threshold&&(s.compress=!1)}try{r.usingBrowserWebSocket?r.ws.send(i):r.ws.send(i,s)}catch(t){h("websocket closed before onclose event")}--o||n()})}(t[i])},r.prototype.onClose=function(){i.prototype.onClose.call(this)},r.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},r.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",n="";return this.port&&("wss"===e&&443!==Number(this.port)||"ws"===e&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=u()),this.supportsBinary||(t.b64=1),(t=a.encode(t)).length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t},r.prototype.check=function(){return!(!p||"__initialize"in p&&this.name===r.prototype.name)}}).call(e,function(){return this}())},function(){},function(t){var e=[].indexOf;t.exports=function(t,n){if(e)return t.indexOf(n);for(var r=0;r<t.length;++r)if(t[r]===n)return r;return-1}},function(t,e){(function(e){var n=/^[\],:{}\s]*$/,r=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,o=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,i=/(?:^|:|,)(?:\s*\[)+/g,s=/^\s+/,a=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(s,"").replace(a,""),e.JSON&&JSON.parse?JSON.parse(t):n.test(t.replace(r,"@").replace(o,"]").replace(i,""))?new Function("return "+t)():void 0):null}}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t,e,n){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}var o=n(7),i=n(35),s=n(45),a=n(46),c=n(47),u=n(3)("socket.io-client:socket"),h=n(29);t.exports=r;var l={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},p=i.prototype.emit;i(r.prototype),r.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[a(t,"open",c(this,"onopen")),a(t,"packet",c(this,"onpacket")),a(t,"close",c(this,"onclose"))]}},r.prototype.open=r.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},r.prototype.send=function(){var t=s(arguments);return t.unshift("message"),this.emit.apply(this,t),this},r.prototype.emit=function(t){if(l.hasOwnProperty(t))return p.apply(this,arguments),this;var e=s(arguments),n=o.EVENT;h(e)&&(n=o.BINARY_EVENT);var r={type:n,data:e,options:{}};return r.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),delete this.flags,this},r.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},r.prototype.onopen=function(){u("transport is open - connecting"),"/"!==this.nsp&&(this.query?this.packet({type:o.CONNECT,query:this.query}):this.packet({type:o.CONNECT}))},r.prototype.onclose=function(t){u("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},r.prototype.onpacket=function(t){if(t.nsp===this.nsp)switch(t.type){case o.CONNECT:this.onconnect();break;case o.EVENT:case o.BINARY_EVENT:this.onevent(t);break;case o.ACK:case o.BINARY_ACK:this.onack(t);break;case o.DISCONNECT:this.ondisconnect();break;case o.ERROR:this.emit("error",t.data)}},r.prototype.onevent=function(t){var e=t.data||[];u("emitting event %j",e),null!=t.id&&(u("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?p.apply(this,e):this.receiveBuffer.push(e)},r.prototype.ack=function(t){var e=this,n=!1;return function(){if(!n){n=!0;var r=s(arguments);u("sending ack %j",r);var i=h(r)?o.BINARY_ACK:o.ACK;e.packet({type:i,id:t,data:r})}}},r.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(u("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):u("bad ack %s",t.id)},r.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},r.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)p.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},r.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},r.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},r.prototype.close=r.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:o.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},r.prototype.compress=function(t){return this.flags=this.flags||{},this.flags.compress=t,this}},function(t){function e(t,e){for(var n=[],r=(e=e||0)||0;r<t.length;r++)n[r-e]=t[r];return n}t.exports=e},function(t){"use strict";function e(t,e,n){return t.on(e,n),{destroy:function(){t.removeListener(e,n)}}}t.exports=e},function(t){var e=[].slice;t.exports=function(t,n){if("string"==typeof n&&(n=t[n]),"function"!=typeof n)throw new Error("bind() requires a function");var r=e.call(arguments,2);return function(){return n.apply(t,r.concat(e.call(arguments)))}}},function(t){function e(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=e,e.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}
return 0|Math.min(t,this.max)},e.prototype.reset=function(){this.attempts=0},e.prototype.setMin=function(t){this.ms=t},e.prototype.setMax=function(t){this.max=t},e.prototype.setJitter=function(t){this.jitter=t}}])});var _socket,token=TOKEN,projectId=PROJECT_ID,DB={_status:"pending",_readyFuncs:[],_eventpool:{},_cachedDb:[],_disconnectNotified:!1,_disconnectMessage:"\u672c\u5c08\u6848\u7528\u5230\u4e86\u96f2\u7aef\u8b8a\u6578/\u8cc7\u6599\u5eab/\u8a0a\u606f\u63a8\u64ad\u529f\u80fd\uff0c\u7531\u65bc\u4f60\u5c1a\u672a\u767b\u5165 \u6a58\u860b\u5b78\u7fd2\u5e73\u53f0\uff0c\u9019\u4e9b\u529f\u80fd\u7121\u6cd5\u4f7f\u7528\uff01",variables:{},table:function(t){function e(e,n,r){"function"==typeof n&&(r=n,n=undefined);var o=guidGenerator();"function"!=typeof r&&(r=i),_socket.emit("find_entries",o,t,e,n),_socket.on(o,r)}function n(e,n){var r=guidGenerator();"function"!=typeof n&&(n=i),_socket.emit("insert_entry",r,t,e),_socket.on(r,n)}function r(e,n,r){var o=guidGenerator();"function"!=typeof r&&(r=i),_socket.emit("update_entry",o,t,e,n),_socket.on(o,r)}function o(e,n){var r=guidGenerator();"function"!=typeof n&&(n=i),_socket.emit("remove_entries",r,t,e),_socket.on(r,n)}var i=function(){};return{find:e,insert:n,remove:o,create:n,read:e,update:r,"delete":o}},onMessage:function(t,e){"disconnected"!==this._status?(this._eventpool[t]==undefined&&(this._eventpool[t]=[]),this._eventpool[t].push(e)):this._disconnectNotified||(this._disconnectNotified=!0,alert(this._disconnectMessage))},trigger:function(t,e){if("disconnected"!==this._status){var n=this._eventpool[t];if(n)for(var r=0;r<n.length;r++)n[r](e)}else this._disconnectNotified||(this._disconnectNotified=!0,alert(this._disconnectMessage))},broadcast:function(t,e){"disconnected"!==this._status?_socket.emit("new_message",{event:t,content:e}):this._disconnectNotified||(this._disconnectNotified=!0,alert(this._disconnectMessage))},ready:function(t){"connected"===this._status||"disconnected"===this._status?t():this._readyFuncs.push(t)}},socket={on:DB.onMessage.bind(DB),emit:DB.broadcast.bind(DB)};if(token){if("development"===ENV)_socket=io("localhost:8888");else if("edge"===ENV)_socket=io("http://ws.edge.koding.school");else if("production"===ENV){var parts=location.host.split(".");_socket=parts.length>0&&"d"===parts[1]?io("https://ws.d.koding.school"):io("https://ws.koding.school")}_socket.on("connected",function(){_socket.emit("login",{token:token,projectId:projectId})}),_socket.on("init_DB",function(t){DB.variables=t.variables,DB.variables.set=function(t,e){"set"!==t&&(DB.variables[t]=e,_socket.emit("variables_changed",{key:t,value:e}))},DB._status="connected";for(var e=0;e<DB._readyFuncs.length;e++)DB._readyFuncs[e]()}),_socket.on("new_message",function(t){DB.trigger(t.event,t.content)}),_socket.on("variables_changed",function(t){DB.variables[t.key]=t.value})}else console.log("\u672a\u9023\u63a5\u8cc7\u6599\u5eab\uff0c\u6216\u8a31\u4f60\u6c92\u6709\u767b\u5165\uff1f"),DB._status="disconnected";!function(t,e){"use strict";"function"==typeof define&&define.amd?define(e(t)):"object"==typeof exports?module.exports=e(t):t.loopProtect=e(t)}(this,function(t){"use strict";function e(t,e){if(0===t)return!1;var n=t,r=1,o=-1,i=-1;do{if(o=e[n].indexOf("*/"),i=e[n].indexOf("/*"),-1!==o&&r++,o===e[n].length-2&&-1!==i&&r--,-1!==i&&0===--r)return!0;n-=1}while(0!==n);return!1}function n(t,e){for(var n;--t>-1;){if('"'===(n=e.substr(t,1))||"'"===n||"."===n)return!0;if(("/"===n||"*"===n)&&(--t,"/"===n))return!0}return!1}function r(t,e,n){s.lastIndex=0,a.lastIndex=0;var r=!1,o=n.slice(e).join("\n").substr(t).replace(a,"");return o.replace(s,function(t,e,n){0===o.substr(0,n).replace(c,"").trim().length&&(r=!0)}),r}function o(t,o){function s(t,e,n){return e.slice(0,n)+"{;"+p+"({ line: "+t+", reset: true }); "+e.slice(n)}var c=[],h=t.split("\n"),l=!1,p=u.alias+".protect",f={},d={},y=null;return o||(o=0),h.forEach(function(t,u){if(i.lastIndex=0,a.lastIndex=0,!l){-1!==t.toLowerCase().indexOf("noprotect")&&(l=!0);var g=-1,m=-1,v=u,b=u-o+1,w="",x=!1,k=!1,A=t.match(i)||[],S=A.length?A[0]:"",B=t.match(a)||[],C=0,_=0,T=!1;if(B.length&&(n(g=t.indexOf(B[1]),t)||e(u,h)||r(g,u,h)&&(y=u)),!f[u]){if(d[u])return void c.push(t);if(S&&1===A.length&&-1===t.indexOf("jsbin")){if(x="do"===S,m=g=t.indexOf(S),n(g,t))return void c.push(t);if(e(u,h))return void c.push(t);for((g=t.indexOf(S)+S.length)===t.length&&g===t.length&&u<h.length-1&&(c.push(t),t=h[++u],f[u]=!0,g=0);g<t.length;){if("("===(w=t.substr(g,1))&&C++,")"===w&&(0===--C&&!1===k&&(k=g)),"{"===w&&_++,"}"===w&&_--,0===C&&(";"===w||"{"===w)){if(";"===w)u!==v?(c[v]=c[v].substring(0,k+1)+"{\nif ("+p+"({ line: "+b+" })) break;\n"+c[v].substring(k+1),t+="\n}}\n"):t=t.substring(0,k+1)+"{\nif ("+p+"({ line: "+b+" })) break;\n"+t.substring(k+1)+"\n}}\n",T=!0;else if("{"===w){var E=";\nif ("+p+"({ line: "+b+" })) break;\n";t=t.substring(0,g+1)+E+t.substring(g+1),g+=E.length}if(u===v&&null===y?(t=s(b,t,m),g+=(";"+p+"({ line: "+u+", reset: true }); ").length):null===y?c[v]=s(b,c[v],m):(void 0===c[y]&&(y--,m=0),c[y]=s(b,c[y],m),y=null),x){for(!1;g<t.length;){if("{"===(w=t.substr(g,1))&&_++,"}"===w&&_--,0===_&&-1!==t.indexOf("while"))return t+="}",c.push(t),void(f[u]=!0);++g===t.length&&u<h.length-1&&(c.push(t),f[u]=!0,t=h[++u],g=0)}return}if(T)return void c.push(t);for(;null!==t;){if("{"===(w=t.substr(g,1))&&_++,"}"===w&&0===--_)return t=t.substring(0,g+1)+"}"+t.substring(g+1),c.push(t),void(f[u]=!0);++g>=t.length&&(c.push(t),f[u]=!0,t=h[++u],g=0)}return}++g===t.length&&u<h.length-1&&(c.push(t),t=h[++u],f[u]=!0,g=0)}}else c.push(t)}}}),l?t:c.join("\n")}var i=/\b(for|while|do)\b/g,s=/\b(for|while|do)\b/,a=/\b(?!default:)([a-z_]{1}\w+:)/i,c=/(?:\/\*(?:[\s\S]*?)\*\/)|(?:([\s;])+\/\/(?:.*)$)/gm,u=o;return u.counters={},u.debug=function(t){t?function(){console.log.apply(console,[].slice.apply(arguments))}:function(){}},u.debug(!1),u.alias="loopProtect",u.protect=function(t){u.counters[t.line]=u.counters[t.line]||{};var e=u.counters[t.line],n=(new Date).getTime();return t.reset&&(e.time=n,e.hit=0,e.last=0),e.hit++,n-e.time>100?(u.hit(t.line),!0):(e.last++,!1)},u.hit=function(e){var n="Exiting potential infinite loop at line "+e+'. To disable loop protection: add "// noprotect" to your code';t.proxyConsole?t.proxyConsole.error(n):console.error(n)},u.reset=function(){u.counters={}},u});var CircularJSON=function(t,e){function n(t,e,n){var r,o,i=!1,s=!!e,a=[],p=[t],f=[t],y=[n?c:"[Circular]"],g=t,m=1;return s&&(o="object"==typeof e?function(t,n){return""!==t&&e.indexOf(t)<0?void 0:n}:e),function(t,e){return s&&(e=o.call(this,t,e)),i?(g!==this&&(r=m-d.call(p,this)-1,m-=r,p.splice(m,p.length),a.splice(m-1,a.length),g=this),"object"==typeof e&&e?(d.call(p,e)<0&&p.push(g=e),m=p.length,(r=d.call(f,e))<0?(r=f.push(e)-1,n?(a.push((""+t).replace(l,u)),y[r]=c+a.join(c)):y[r]=y[0]):e=y[r]):"string"==typeof e&&n&&(e=e.replace(u,h).replace(c,u))):i=!0,e}}function r(t,e){for(var n=0,r=e.length;n<r;t=t[e[n++].replace(p,c)]);return t}function o(t){return function(e,n){var r="string"==typeof n;return r&&n.charAt(0)===c?new y(n.slice(1)):(""===e&&(n=a(n,n,{})),r&&(n=n.replace(f,"$1"+c).replace(h,u)),t?t.call(this,e,n):n)}}function i(t,e,n){for(var r=0,o=e.length;r<o;r++)e[r]=a(t,e[r],n);return e}function s(t,e,n){for(var r in e)e.hasOwnProperty(r)&&(e[r]=a(t,e[r],n));return e}function a(t,e,n){return e instanceof Array?i(t,e,n):e instanceof y?e.length?n.hasOwnProperty(e)?n[e]:n[e]=r(t,e.split(c)):t:e instanceof Object?s(t,e,n):e}var c="~",u="\\x"+("0"+c.charCodeAt(0).toString(16)).slice(-2),h="\\"+u,l=new e(u,"g"),p=new e(h,"g"),f=new e("(?:^|([^\\\\]))"+h),d=[].indexOf||function(t){for(var e=this.length;e--&&this[e]!==t;);return e},y=String,g={stringify:function(t,e,r,o){return g.parser.stringify(t,n(t,e,!o),r)},parse:function(t,e){return g.parser.parse(t,o(e))},parser:t};return g}(JSON,RegExp);Sandbox.prototype.injectHTML=function(t){document.getElementsByTagName("body")[0].innerHTML+=t},Sandbox.prototype.injectCSS=function(t){var e=document.createElement("style");e.innerHTML=t,document.body.appendChild(e)},Sandbox.prototype.injectJS=function(t){var e=t;return eval.call(window,e)},Console.prototype.postConsoleText=function(t,e,n){parent.postMessage({text:t,type:e,icon:n,fn:"console"},"*")},Console.prototype.textColor=function(t){var e=typeof t;return null===t?{text:"null",type:"null"}:"object"===e?{text:CircularJSON.stringify(t,null,4),type:"object"}:t===undefined?{text:"undefined",type:"undefined"}:{text:t.toString(),type:e}},window.missionComplete=function(){parent.postMessage({fn:"missionComplete"},"*")},window.mobilecheck=function(){var t,e=!1;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e},function(){if(mobilecheck()){document.querySelectorAll(".gamepad-btn").forEach(function(t){t.style.display="inline",t.addEventListener("touchstart",function(){t.style.opacity=.6}),t.addEventListener("touchend",function(){t.style.opacity=.3})});var t={};setInterval(function(){for(var e in t)t[e].isDown&&stage.dispatchEvent(t[e].downEvent),t[e].isUp&&(stage.dispatchEvent(t[e].upEvent),t[e].isUp=!1)},90)}}();var Game=Engine("stage");for(var _ in Game.set({precision:2}),Game)window[_]=Game[_];!function(){function t(){var t=document.getElementById("stage"),e=document.getElementById("container"),n=e.clientWidth,r=e.clientHeight,o=n/t.width,i=r/t.height;t.style.width=t.width*(o>i?i:o)+"px"}function e(t,e){var n={fn:"screenshot",content:document.getElementById("stage").toDataURL("image/jpeg")};t.source.postMessage(n,e)}function n(t){if("javascript"!=PROJECT_LANGUAGE)throw"We don't support this kind of code!";var e=r.injectJS(t),n=o.textColor(e);"string"===n.type&&(n.data='"'+n.data+'"'),o.postConsoleText(n.text,n.type,"<")}var r=new Sandbox,o=new Console;setTimeout(t,200),window.onresize=t,window.addEventListener("message",function(t){var o=t.origin||t.originalEvent.origin;if(CORS_DOMAINS.includes(o)){var i=t.data;"injectCode"===i.fn&&n(i.params),"executeCode"===i.fn&&DB.ready(function(){r.injectJS(i.params)}),"screenshot"===i.fn&&e(t,o),"stop"===i.fn&&Game.stop(),"focusStage"===i.fn&&document.getElementById("stage").focus()}}),Game.forever(function(){var t=JSON.stringify([Game.cursor.x,Game.cursor.y]);parent.postMessage({text:t,fn:"cursorPoint"},"*")})}(),window.addEventListener("keydown",function(t){[32,37,38,39,40].indexOf(t.keyCode)>-1&&t.preventDefault()},!1);</script><textarea id="mainCode" style="display: none;">
  </textarea><textarea id="pluginCode" style="display: none;"></textarea><script>function htmlDecode(input){
      var doc = new DOMParser().parseFromString(input, "text/html");
    return doc.documentElement.textContent;
  }
  
  Game.preload([], function() {
      DB.ready(function(){
          var pluginCode = htmlDecode(document.getElementById('pluginCode').innerHTML);
          var mainCode = htmlDecode(document.getElementById('mainCode').innerHTML);
          eval.call(window, pluginCode);
          eval.call(window, mainCode);
          Game.start();
      });
  });</script><style type="text/css">.gamepad-btn {
    display: none;
    position: absolute;
    width: 50px;
    height: 50px;
    opacity: .3;
  }</style>
  <script>
    fetch('script.js')
      .then(response => {
        if (!response.ok) throw new Error('Fetch failed');
        return response.text();
      })
      .then(data => {
        document.getElementById('mainCode').value = data;
      })
      .catch(err => {
        document.getElementById('mainCode').value = 'Error loading file: ' + err.message;
      });
  </script>
  </body></html>
